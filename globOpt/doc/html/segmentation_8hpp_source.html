<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>globOpt: include/globfit2/optimization/impl/segmentation.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">globOpt
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e01fc40d2b7505b29a2defa0d6c40691.html">include</a></li><li class="navelem"><a class="el" href="dir_a06271ff063861600d6d08430c32feea.html">globfit2</a></li><li class="navelem"><a class="el" href="dir_763fb2c265f38c1017b67df34d2ee3ec.html">optimization</a></li><li class="navelem"><a class="el" href="dir_11ec1105867bd10ed267fa05876e7dc9.html">impl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">segmentation.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="segmentation_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef GF2_SEGMENTATION_HPP</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define GF2_SEGMENTATION_HPP</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="segmentation_8h.html">globfit2/optimization/segmentation.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="my__types_8h.html">globfit2/my_types.h</a>&quot;</span>                  <span class="comment">// PCLPointAllocator</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#if GF2_USE_PCL</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#   include &quot;pcl/point_types.h&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#   include &lt;pcl/point_cloud.h&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="containers_8hpp.html">globfit2/util/containers.hpp</a>&quot;</span> <span class="comment">// add( map, gid, primitive), add( vector, gid, primitive )</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="parameters_8h.html">globfit2/parameters.h</a>&quot;</span>        <span class="comment">// CandidateGeneratorParams</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">namespace </span>GF2 {</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">template</span> &lt; <span class="keyword">class    </span>_PointPrimitiveT</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;         , <span class="keyword">class    </span>_PrimitiveT</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;         , <span class="keyword">typename</span> _Scalar</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;         , <span class="keyword">class    </span>_PointContainerT</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;         &gt;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="class_g_f2_1_1_segmentation.html#ab540cb80acb78ea18b5306b7ffbbd389">   25</a></span>&#160;<a class="code" href="class_g_f2_1_1_segmentation.html#ab540cb80acb78ea18b5306b7ffbbd389">Segmentation::orientPoints</a>( _PointContainerT          &amp;<a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;                          , _Scalar             <span class="keyword">const</span>  <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;                          , <span class="keywordtype">int</span>                 <span class="keyword">const</span>  nn_K   )</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keyword">typedef</span> pcl::PointCloud&lt;pcl::PointXYZ&gt;        CloudXYZ;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">// to pcl cloud</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    CloudXYZ::Ptr <a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a>( <span class="keyword">new</span> CloudXYZ() );</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    _PointPrimitiveT::template toCloud&lt;CloudXYZ::Ptr, _PointContainerT, PCLPointAllocator&lt;_PointPrimitiveT::Dim&gt; &gt;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            ( <a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a>, <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a> );</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// (1) local fit lines from pcl cloud</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    std::vector&lt;_PrimitiveT&gt; <a class="code" href="fmincon__merged_8m.html#a24ea4de43963cf4fe19a84bb8e3cfdf7">fit_lines</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    std::vector&lt;int        &gt; point_ids;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <a class="code" href="class_g_f2_1_1_segmentation.html#a5455cad2a3e2f91b7dc498d7139bb961">fitLocal</a>( <span class="comment">/* [out]       lines: */</span> fit_lines</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;               , <span class="comment">/*            points: */</span> cloud</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;               , <span class="comment">/*           indices: */</span> NULL</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;               , <span class="comment">/*              nn_K: */</span> nn_K</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;               , <span class="comment">/*         nn_radius: */</span> scale</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;               , <span class="comment">/*       soft_radius: */</span> <span class="keyword">true</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;               , <span class="comment">/* [out]     mapping: */</span> &amp;point_ids ); <span class="comment">// contains point id for fit_line</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="comment">// copy line direction into point</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> pid_id = 0; pid_id != point_ids.size(); ++pid_id )</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = point_ids[pid_id];</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].coeffs().template segment&lt;3&gt;(3) = fit_lines[pid_id].<a class="code" href="fmincon__merged_8m.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    } <span class="comment">// ... (1) local fit</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;} <span class="comment">//...Segmentation::orientPoints()</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">template</span> &lt; <span class="keyword">class </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;         , <span class="keyword">class </span>_PointContainerPtrT&gt; <span class="keywordtype">int</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="class_g_f2_1_1_segmentation.html#a5455cad2a3e2f91b7dc498d7139bb961">   61</a></span>&#160;<a class="code" href="class_g_f2_1_1_segmentation.html#a5455cad2a3e2f91b7dc498d7139bb961">Segmentation:: fitLocal</a>( _PrimitiveContainerT        &amp; lines</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                       , _PointContainerPtrT    <span class="keyword">const</span>  <a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                       , std::vector&lt;int&gt;       <span class="keyword">const</span>* indices</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                       , <span class="keywordtype">int</span>                    <span class="keyword">const</span>  K</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                       , <span class="keywordtype">float</span>                  <span class="keyword">const</span>  radius</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                       , <span class="keywordtype">bool</span>                   <span class="keyword">const</span>  soft_radius</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                       , std::vector&lt;int&gt;            * point_ids</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                       )</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keyword">using</span> std::vector;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> _PrimitiveContainerT::value_type         TLine;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> TLine::Scalar              Scalar;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> _PointContainerPtrT::element_type   PointsT;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">if</span> ( indices ) { std::cerr &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;]: indices must be NULL, not implemented yet...&quot;</span> &lt;&lt; std::endl; <span class="keywordflow">return</span> EXIT_FAILURE; }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// get neighbourhoods</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    std::vector&lt; std::vector&lt;int   &gt; &gt; neighs;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    std::vector&lt; std::vector&lt;Scalar&gt; &gt; sqr_dists;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    smartgeometry::getNeighbourhoodIndices( <span class="comment">/*   [out] neighbours: */</span> neighs</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                            , <span class="comment">/* [in]  pointCloud: */</span> cloud</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                                            , <span class="comment">/* [in]     indices: */</span> indices</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                            , <span class="comment">/* [out]  sqr_dists: */</span> &amp;sqr_dists</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                            , <span class="comment">/* [in]        nn_K: */</span> K              <span class="comment">// 5</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                            , <span class="comment">/* [in]      radius: */</span> radius         <span class="comment">// 0.02f</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                            , <span class="comment">/* [in] soft_radius: */</span> soft_radius    <span class="comment">// true</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                            );</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// only use, if more then 2 data-points</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> ( std::count_if( neighs.begin(), neighs.end(), [] (vector&lt;int&gt; <span class="keyword">const</span>&amp; n1) { <span class="keywordflow">return</span> n1.size() &gt; 2; } ) &lt; 2 )</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;not enough to work with (&lt;2)...change scale &quot;</span> &lt;&lt; radius &lt;&lt; std::endl;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// every point proposes primitive[s] using its neighbourhood</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">int</span> skipped = 0;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != neighs.size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="comment">// can&#39;t fit a line to 0 or 1 points</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">if</span> ( neighs[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].<a class="code" href="scale__optimization_8m.html#aa3bc9f08cad6c0b386cc994140e1ce2e">size</a>() &lt; 2 )</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            ++skipped;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        Eigen::Matrix&lt;Scalar,TLine::Dim,1&gt; <a class="code" href="get__line_8m.html#a4fa05b1f00fcde100685cc887554b93b">line</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordtype">int</span> err = smartgeometry::geometry::fitLinearPrimitive&lt;PointsT,Scalar,TLine::Dim&gt;( <span class="comment">/*           output: */</span> <a class="code" href="get__line_8m.html#a4fa05b1f00fcde100685cc887554b93b">line</a></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                                                                          , <span class="comment">/*         points: */</span> *<a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                                                                          , <span class="comment">/*          scale: */</span> radius</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                                                                          , <span class="comment">/*        indices: */</span> &amp;(neighs[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>])</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                                                                          , <span class="comment">/*    refit times: */</span> 2</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                                                                          , <span class="comment">/* use input line: */</span> <span class="keyword">false</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                                                          );</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span> ( err == EXIT_SUCCESS )      lines.emplace_back( TLine(line) );</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> ( point_ids )</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            point_ids-&gt;emplace_back( <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> );</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;              &lt;&lt; skipped &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; neighs.size() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; skipped / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(neighs.size()) * 100.f &lt;&lt; <span class="stringliteral">&quot;% of points did not produce primitives, so the primitive count is:&quot;</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;              &lt;&lt; lines.size() &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; lines.size() / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(neighs.size()) *100.f &lt;&lt; <span class="stringliteral">&quot;%&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;} <span class="comment">// ...Segment::propose()</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"> * \brief Groups unoriented points into oriented patches represented by a single primitive</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> *                   (1) group to patches</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> *                   (2) refit lines to patches</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> * \tparam _PrimitiveContainerT Concept: std::map&lt; int, std::vector&lt;_PrimitiveT&gt; &gt;. Groups primitives by their GID.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"> * \param[out] patches                   Ready to process patches, each of them with one direction only. ( { 0: [Primitive00] }, { 1: [Primitive11] }, ... )</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> * \param[in/out] points                 Input points that get assigned to the patches by their GID tag set.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> * \param[in]  scale                     Spatial scale to use for fits.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> * \param[in]  angles                    Desired angles to use for groupings.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> * \param[in]  patchPatchDistanceFunctor #regionGrow() uses the thresholds encoded to group points. The evalSpatial() function is used to assign orphan points.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> * \param[in]  nn_K                      Number of nearest neighbour points looked for in #regionGrow().</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keyword">template</span> &lt; <span class="keyword">class       </span>_PrimitiveT</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;         , <span class="keyword">typename</span>    _Scalar</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;         , <span class="keyword">class       </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         , <span class="keyword">class       </span>_PointContainerT</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;         , <span class="keyword">class       </span>_PatchPatchDistanceFunctorT</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;         &gt; <span class="keywordtype">int</span></div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="class_g_f2_1_1_segmentation.html#a5060de9c9444d728400f8ea8e0f575df">  146</a></span>&#160;<a class="code" href="class_g_f2_1_1_segmentation.html#a5060de9c9444d728400f8ea8e0f575df">Segmentation::patchify</a>( _PrimitiveContainerT                   &amp; patches</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                      , _PointContainerT                       &amp; <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                      , _Scalar                           <span class="keyword">const</span>  <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                      , std::vector&lt;_Scalar&gt;              <span class="keyword">const</span>&amp; angles</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                      , _PatchPatchDistanceFunctorT       <span class="keyword">const</span>&amp; patchPatchDistanceFunctor</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                      , <span class="keywordtype">int</span>                               <span class="keyword">const</span>  nn_K</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                      )</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="struct_g_f2_1_1segmentation_1_1_patch.html">segmentation::Patch&lt;_Scalar,_PrimitiveT&gt;</a> PatchT;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">typedef</span> std::vector&lt; PatchT &gt;                    PatchesT;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> _PointContainerT::value_type PointPrimitiveT;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// log</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;PatchPatchDistance by &quot;</span> &lt;&lt; patchPatchDistanceFunctor.toString() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// (1) group</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    PatchesT groups;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        regionGrow&lt;_PrimitiveT&gt;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                  ( <span class="comment">/* [in,out]  points/pointsWGIDTag: */</span> <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                  , <span class="comment">/* [out]          groups_pointids: */</span> groups</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                  , <span class="comment">/* [in]                     scale: */</span> <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                  , <span class="comment">/* [in] patchPatchDistanceFunctor: */</span> patchPatchDistanceFunctor</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                  , <span class="comment">/* [in]              gid_tag_name: */</span> PointPrimitiveT::GID</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                  , <span class="comment">/* [in]                      nn_K: */</span> nn_K );</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    } <span class="comment">// ... (1) group</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// (2) Create PrimitiveContainer</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// Copy the representative direction of each patch in groups to an output patch with GID as it&#39;s linear index in groups.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> gid = 0; gid != groups.size(); ++gid )</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="namespace_g_f2_1_1containers.html#a3c5bd8be9debd9a6eafe6bb99af7e26e">containers::add</a>( patches, gid, groups[gid].getRepresentative() )</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                .setTag( _PrimitiveT::GID    , gid )</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                .setTag( _PrimitiveT::DIR_GID, gid );</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;} <span class="comment">// ...Segmentation::patchify()</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">/*  \brief                               Greedy region growing</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"> *  \tparam _PrimitiveContainerT         Concept: std::vector&lt;\ref GF2::LinePrimitive2&gt;</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"> *  \tparam _PointContainerT             Concept: std::vector&lt;\ref GF2::PointPrimitive&gt;</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"> *  \tparam _PointPatchDistanceFunctorT  Concept: \ref RepresentativeSqrPatchPatchDistanceFunctorT.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"> *  \tparam _PatchesT                    Concept: vector&lt; \ref segmentation::Patch &lt;_Scalar,_PrimitiveT&gt; &gt;</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"> *  \tparam _PrimitiveT                  Concept: \ref GF2::LinePrimitive2</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> *  \tparam _Scalar                      Concept: float</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"> *  \tparam _PointT                      Concept: \ref GF2::PointPrimitive</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"> *  \param[in,out] points                Input points to create patches from. The \p gid_tag_name field of the points will be set according to their patch assignment.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"> *  \param[out] groups_arg               Holds the point-id-groups, that can then be refit to to get a patch location and direction. Concept: vector&lt;\ref segmentation::Patch&gt;.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"> *  \param[in] scale                     Spatial extent of the input. In practice unused, since the \p patchPatchDistanceFunctor was constructed with it.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> *  \param[in] patchPatchDistanceFunctor Takes two patches, and decides, whether they are similar enough to be merged.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"> *                                       In practice, takes a patch that is currently grown, and a temporary patch</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"> *                                       that only contains a neighbouring point, and decides. See in \ref RepresentativeSqrPatchPatchDistanceFunctorT.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> *  \param[in] gid_tag_name              The key value of GID in _PointT. Suggested to be: _PointT::GID.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> *  \param[in] nn_K                      Number of nearest neighbour points looked for.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="keyword">template</span> &lt; <span class="keyword">class       </span>_PrimitiveT</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;         , <span class="keyword">class       </span>_PointContainerT</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;         , <span class="keyword">class       </span>_PatchPatchDistanceFunctorT</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;         , <span class="keyword">class       </span>_PatchesT</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;         , <span class="keyword">typename</span>    _Scalar</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;         , <span class="keyword">class       </span>_PointPrimitiveT&gt; <span class="keywordtype">int</span></div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="class_g_f2_1_1_segmentation.html#abd83c460861845398b5e145fc3fd505e">  209</a></span>&#160;<a class="code" href="class_g_f2_1_1_segmentation.html#abd83c460861845398b5e145fc3fd505e">Segmentation::regionGrow</a>( _PointContainerT                       &amp; <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                        , _PatchesT                              &amp; groups_arg</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                        , _Scalar                           <span class="keyword">const</span>  <span class="comment">/*scale*/</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                        , _PatchPatchDistanceFunctorT       <span class="keyword">const</span>&amp; patchPatchDistanceFunctor</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                        , <span class="keywordtype">int</span>                               <span class="keyword">const</span>  gid_tag_name</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        , <span class="keywordtype">int</span>                               <span class="keyword">const</span>  nn_K )</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;running with &quot;</span> &lt;&lt; patchPatchDistanceFunctor.toString() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;running at &quot;</span> &lt;&lt; patchPatchDistanceFunctor.getSpatialThreshold() &lt;&lt; <span class="stringliteral">&quot; spatial threshold&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;running at &quot;</span> &lt;&lt; patchPatchDistanceFunctor.getAngularThreshold() &lt;&lt; <span class="stringliteral">&quot; radius threshold&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> _PatchesT::value_type   PatchT;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keyword">typedef</span>          std::vector&lt;PatchT&gt;     Patches;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">// create patches with a single point in them</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    std::deque&lt;int&gt; starting_cands( points.size() );</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != points.size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="comment">//const int pid = point_ids_arg ? (*point_ids_arg)[ pid_id ] : pid_id;</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">if</span> ( points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].<span class="keyword">template</span> <a class="code" href="fmincon__merged_8m.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>().norm() != _Scalar(1) )</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;unoriented point at pid &quot;</span> &lt;&lt; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> &lt;&lt; <span class="stringliteral">&quot;? &quot;</span> &lt;&lt; points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].<span class="keyword">template</span> <a class="code" href="fmincon__merged_8m.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>().transpose() &lt;&lt; <span class="stringliteral">&quot;, norm: &quot;</span> &lt;&lt; points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].template <a class="code" href="fmincon__merged_8m.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>().norm() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        starting_cands.push_back( <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> );</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">// prebulid ann cloud</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr ann_cloud( <span class="keyword">new</span> pcl::PointCloud&lt;pcl::PointXYZ&gt;() );</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        ann_cloud-&gt;reserve( points.size() );</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != points.size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            pcl::PointXYZ pnt;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            pnt.x = points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].template pos()(0); <span class="comment">// convert PointPrimitive to Eigen::Matrix, and get (0)</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            pnt.y = points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].template pos()(1);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            pnt.z = points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].template pos()(2);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            ann_cloud-&gt;push_back( pnt );</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">typename</span> pcl::search::KdTree&lt;pcl::PointXYZ&gt;::Ptr tree( <span class="keyword">new</span> pcl::search::KdTree&lt;pcl::PointXYZ&gt; );</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    tree-&gt;setInputCloud( ann_cloud );</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    Patches patches; patches.reserve( std::max(1.5*sqrt(points.size()),10.) );</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// get unassigned point</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    std::vector&lt;bool&gt; assigned( points.size(), false );</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    std::vector&lt;bool&gt; visited( points.size(), false );</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    std::vector&lt;float&gt;  sqr_dists( nn_K );</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    std::vector&lt; int &gt;  neighs( nn_K );</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">int</span>                 found_points_count  = 0;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    pcl::PointXYZ       searchPoint;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keyword">const</span> _Scalar       max_dist            = patchPatchDistanceFunctor.getSpatialThreshold() * _Scalar(3.5); <span class="comment">// longest axis of ellipse)</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// look for neighbours, merge most similar</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">while</span> ( starting_cands.size() )</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">// remove point from unassigned</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = starting_cands.front();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        starting_cands.pop_front();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span> ( visited[pid] &amp;&amp; !assigned[pid] )</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot; visited but not assigned...:JSDL:FJSD:LKFSDK:SFDJ&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">if</span> ( visited[pid] )</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// add to new cluster</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">if</span> ( !assigned[pid] )</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            PatchT tmp_patch; tmp_patch.push_back( <a class="code" href="namespace_g_f2_1_1segmentation.html#ab1b3fa4a3c6e32b0912447d24457be4f">segmentation::PidLid</a>(pid,-1) );</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            patches.push_back( tmp_patch );</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            patches.back().update( points );</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            assigned[ <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> ] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="comment">// look for unassigned neighbours</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        searchPoint.x = points[ <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> ].template pos()(0);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        searchPoint.y = points[ <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> ].template pos()(1);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        searchPoint.z = points[ <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> ].template pos()(2);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        found_points_count = tree-&gt;radiusSearch( searchPoint, max_dist, neighs, sqr_dists, 0);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> ( neighs.size() != found_points_count )</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;as;dlkjfa;lkdsjfl;asdjkf neighs.size() &quot;</span> &lt;&lt; neighs.size() &lt;&lt; <span class="stringliteral">&quot; != &quot;</span> &lt;&lt; found_points_count &lt;&lt; <span class="stringliteral">&quot; found_points_count&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> pid_id = 0; pid_id != neighs.size(); ++pid_id )</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="lp_8m.html#a4ef62f8677d097c35ad5abfa948c8004">pid2</a> = neighs[ pid_id ];</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordflow">if</span> ( !assigned[pid2] )</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                <span class="comment">//_Scalar diff = GF2::angleInRad( patches.back().template dir(), points[pid2].template dir() );</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="comment">// location from point, but direction is the representative&#39;s</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                _PointPrimitiveT p1_proxy(points[pid].<span class="keyword">template</span> pos(), patches.back().template <a class="code" href="fmincon__merged_8m.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>());</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                PatchT p2_proxy; p2_proxy.push_back( <a class="code" href="namespace_g_f2_1_1segmentation.html#ab1b3fa4a3c6e32b0912447d24457be4f">segmentation::PidLid</a>(pid2,-1) ); p2_proxy.update( points );</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <span class="comment">//if ( (sqrt(sqr_dists[pid_id]) &lt; spatial_thresh) &amp;&amp; (diff &lt; ang_thresh) )                                      // original condition</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <span class="keywordflow">if</span> ( patchPatchDistanceFunctor.template eval&lt;_PointPrimitiveT&gt;(p1_proxy, p2_proxy, points, NULL) &lt; patchPatchDistanceFunctor.getThreshold() )</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    patches.back().push_back( <a class="code" href="namespace_g_f2_1_1segmentation.html#ab1b3fa4a3c6e32b0912447d24457be4f">segmentation::PidLid</a>(pid2,-1) );</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                    patches.back().updateWithPoint( points[pid2] );</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                    assigned[<a class="code" href="lp_8m.html#a4ef62f8677d097c35ad5abfa948c8004">pid2</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    <span class="comment">// enqueue for visit</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    starting_cands.push_front( pid2 );</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        visited[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// copy patches to groups</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    groups_arg.insert( groups_arg.end(), patches.begin(), patches.end() );</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// assign points to patches</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    _tagPointsFromGroups&lt;_PointPrimitiveT,_Scalar&gt;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                        ( <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, groups_arg, patchPatchDistanceFunctor, gid_tag_name );</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;} <span class="comment">// ...Segmentation::regionGrow()</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">/*  \brief                  Step 1. Generates primitives from a cloud. Reads &quot;cloud.ply&quot; and saves &quot;candidates.txt&quot;.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> *  \param argc             Contains --cloud cloud.ply, and --scale scale.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> *  \param argv             Contains --cloud cloud.ply, and --scale scale.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"> *  \return                 EXIT_SUCCESS.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"> *  \post                   &quot;patches.txt&quot; and &quot;points_primitives.txt&quot; on disk in &quot;cloud.ply&quot;&#39;s parent path.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="keyword">template</span> &lt; <span class="keyword">class </span>_PrimitiveT</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;         , <span class="keyword">class </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;         , <span class="keyword">class </span>_PointPrimitiveT</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;         , <span class="keyword">class </span>_PointContainerT</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;         , <span class="keyword">typename</span> _Scalar</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;         &gt;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="keywordtype">int</span></div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="class_g_f2_1_1_segmentation.html#ab70d70310afdee9b7c82ec995024b668">  341</a></span>&#160;<a class="code" href="class_g_f2_1_1_segmentation.html#ab70d70310afdee9b7c82ec995024b668">Segmentation::segmentCli</a>( <span class="keywordtype">int</span>    argc</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                        , <span class="keywordtype">char</span>** argv )</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">int</span> err = EXIT_SUCCESS;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="struct_g_f2_1_1_candidate_generator_params.html">CandidateGeneratorParams&lt;_Scalar&gt;</a> generatorParams;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    std::string                 cloud_path              = <span class="stringliteral">&quot;./cloud.ply&quot;</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    _Scalar                     angle_gen               = M_PI_2;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    std::string                 mode_string             = <span class="stringliteral">&quot;representative_sqr&quot;</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    std::vector&lt;std::string&gt;    mode_opts               = { <span class="stringliteral">&quot;representative_sqr&quot;</span> };</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// parse input</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> ( err == EXIT_SUCCESS )</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordtype">bool</span> valid_input = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="comment">// scale</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">if</span> ( (pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--scale&quot;</span>, generatorParams.<a class="code" href="struct_g_f2_1_1_common_params.html#a414729020b67204b42ca6ab1ad32aa5d">scale</a>) &lt; 0) )</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;--scale is compulsory&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            valid_input = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="comment">// cloud</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">if</span> ( (pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--cloud&quot;</span>, cloud_path) &lt; 0)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;             &amp;&amp; !boost::filesystem::exists( cloud_path ) )</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;--cloud does not exist: &quot;</span> &lt;&lt; cloud_path &lt;&lt; std::endl;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            valid_input = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--angle-limit&quot;</span>, generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#a7a1887ccfea503e1f7cc8882e774231f">angle_limit</a> );</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--patch-dist-limit&quot;</span>, generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#ac2ede42aac59593b6d19eb03639955e9">patch_dist_limit_mult</a> ); <span class="comment">// gets multiplied by scale</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--mode&quot;</span>, mode_string );</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#a6d923c38a3c5b62f6ad57e365c016d09">parsePatchDistMode</a>( mode_string );</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">if</span> ( pcl::console::find_switch( argc, argv, <span class="stringliteral">&quot;--patch-refit&quot;</span> ) )</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;--patch-refit option has been DEPRECATED. exiting.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--angle-gen&quot;</span>, angle_gen );</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="comment">// print usage</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;Usage:\t &quot;</span> &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; --segment \n&quot;</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;\t --cloud &quot;</span> &lt;&lt; cloud_path &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;\t --scale &quot;</span> &lt;&lt; generatorParams.<a class="code" href="struct_g_f2_1_1_common_params.html#a414729020b67204b42ca6ab1ad32aa5d">scale</a>      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="comment">// linkage mode (full_min, full_max, squared_min, repr_min)</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;\t [--mode *&quot;</span> &lt;&lt; generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#a250e7a620373964d77ff805f6c7efb09">printPatchDistMode</a>() &lt;&lt; <span class="stringliteral">&quot;*\t&quot;</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="compare_mosek_gurobi_8m.html#ab28bbea71e3faec8c14dd00b8733c8a9">m</a> = 0; <a class="code" href="compare_mosek_gurobi_8m.html#ab28bbea71e3faec8c14dd00b8733c8a9">m</a> != mode_opts.size(); ++<a class="code" href="compare_mosek_gurobi_8m.html#ab28bbea71e3faec8c14dd00b8733c8a9">m</a> )</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                std::cerr &lt;&lt; <span class="stringliteral">&quot;|&quot;</span> &lt;&lt; mode_opts[<a class="code" href="compare_mosek_gurobi_8m.html#ab28bbea71e3faec8c14dd00b8733c8a9">m</a>];</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;\t [--angle-limit &quot;</span> &lt;&lt; generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#a7a1887ccfea503e1f7cc8882e774231f">angle_limit</a> &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;\t [--patch-dist-limit &quot;</span> &lt;&lt; generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#ac2ede42aac59593b6d19eb03639955e9">patch_dist_limit_mult</a> &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;\t [--angle-gen &quot;</span> &lt;&lt; angle_gen &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            std::cerr &lt;&lt; std::endl;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">if</span> ( !valid_input || pcl::console::find_switch(argc,argv,<span class="stringliteral">&quot;--help&quot;</span>) || pcl::console::find_switch(argc,argv,<span class="stringliteral">&quot;-h&quot;</span>) )</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">if</span> ( boost::filesystem::is_directory(cloud_path) )</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            cloud_path += <span class="stringliteral">&quot;/cloud.ply&quot;</span>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span> ( !boost::filesystem::exists(cloud_path) )</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;cloud file does not exist! &quot;</span> &lt;&lt; cloud_path &lt;&lt; std::endl;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    } <span class="comment">// ... parse input</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">// Read desired angles</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS == err )</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="namespace_g_f2_1_1processing.html#a58cba102f9c9b0bcc70da6250e3ced17">processing::appendAnglesFromGenerator</a>( generatorParams.<a class="code" href="struct_g_f2_1_1_common_params.html#aab94199958a72779c5067ef29b406ee9">angles</a>, angle_gen, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    } <span class="comment">//...read angles</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// Read points</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    _PointContainerT <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS == err )</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        err = io::readPoints&lt;_PointPrimitiveT&gt;( <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, cloud_path );</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">if</span> ( err != EXIT_SUCCESS )  std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;readPoints returned error &quot;</span> &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    } <span class="comment">//...read points</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">//_____________________WORK_______________________</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">//_______________________________________________</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// orientPoints</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS == err )</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        err = Segmentation::orientPoints&lt;_PointPrimitiveT,_PrimitiveT&gt;( <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, generatorParams.<a class="code" href="struct_g_f2_1_1_common_params.html#a414729020b67204b42ca6ab1ad32aa5d">scale</a>, generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#a961cb3b2007b17476026e82b833978ef">nn_K</a> );</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">if</span> ( err != EXIT_SUCCESS ) std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;orientPoints exited with error! Code: &quot;</span> &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    } <span class="comment">//...orientPoints</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    _PrimitiveContainerT initial_primitives;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS == err )</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">switch</span> ( generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#aa5da1cdf35c2e2b2ff15fb267c45324d">patch_dist_mode</a> )</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="struct_g_f2_1_1_candidate_generator_params.html">CandidateGeneratorParams&lt;_Scalar&gt;::REPR_SQR</a>:</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="comment">// &quot;representative min:&quot; merge closest representative angles, IF smallest spatial distance between points &lt; scale * patch_dist_limit.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                <a class="code" href="struct_g_f2_1_1_representative_sqr_patch_patch_distance_functor_t.html">RepresentativeSqrPatchPatchDistanceFunctorT&lt; _Scalar,SpatialPatchPatchSingleDistanceFunctorT&lt;_Scalar&gt;</a></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                                                        &gt; patchPatchDistanceFunctor( generatorParams.<a class="code" href="struct_g_f2_1_1_common_params.html#a414729020b67204b42ca6ab1ad32aa5d">scale</a> * generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#ac2ede42aac59593b6d19eb03639955e9">patch_dist_limit_mult</a></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                                                                                   , generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#a7a1887ccfea503e1f7cc8882e774231f">angle_limit</a></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                                                                                   , generatorParams.<a class="code" href="struct_g_f2_1_1_common_params.html#a414729020b67204b42ca6ab1ad32aa5d">scale</a></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                                                                                   , generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#aca171dc5b21762fff8cde4c504ccdf42">patch_spatial_weight</a> );</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                err = Segmentation::patchify&lt;_PrimitiveT&gt;( initial_primitives    <span class="comment">// tagged lines at GID with patch_id</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                            , points                            <span class="comment">// filled points with directions and tagged at GID with patch_id</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                            , generatorParams.<a class="code" href="struct_g_f2_1_1_common_params.html#a414729020b67204b42ca6ab1ad32aa5d">scale</a></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                                            , generatorParams.<a class="code" href="struct_g_f2_1_1_common_params.html#aab94199958a72779c5067ef29b406ee9">angles</a></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                            , patchPatchDistanceFunctor</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                            , generatorParams.<a class="code" href="struct_g_f2_1_1_candidate_generator_params.html#a961cb3b2007b17476026e82b833978ef">nn_K</a></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                                            );</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                std::cerr &lt;&lt; <span class="stringliteral">&quot;unknown patch patch distance mode!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                err = EXIT_FAILURE;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> ( err != EXIT_SUCCESS ) std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;patchify exited with error! Code: &quot;</span> &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// Save point GID tags</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS == err )</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        std::string assoc_path = <a class="code" href="function__handle_8m.html#a03d2a3685385f82943527be28e035ad9">boost::filesystem::path</a>( cloud_path ).parent_path().string() + <span class="stringliteral">&quot;/&quot;</span> + <span class="stringliteral">&quot;points_primitives.csv&quot;</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="namespace_g_f2_1_1util.html#a76af03f83085374160be9ba6570d1955">util::saveBackup</a>( assoc_path );</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        err = io::writeAssociations&lt;_PointPrimitiveT&gt;( <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, assoc_path );</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">if</span> ( err != EXIT_SUCCESS )  std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;saveBackup or writeAssociations exited with error! Code: &quot;</span> &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">else</span>                        std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;wrote to &quot;</span> &lt;&lt; assoc_path &lt;&lt; std::endl;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    } <span class="comment">//...save Associations</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// save primitives</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS == err )</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        std::string candidates_path = <a class="code" href="function__handle_8m.html#a03d2a3685385f82943527be28e035ad9">boost::filesystem::path</a>( cloud_path ).parent_path().string() + <span class="stringliteral">&quot;/&quot;</span> + <span class="stringliteral">&quot;patches.csv&quot;</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <a class="code" href="namespace_g_f2_1_1util.html#a76af03f83085374160be9ba6570d1955">util::saveBackup</a>( candidates_path );</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        err = io::savePrimitives&lt;_PrimitiveT,typename _PrimitiveContainerT::value_type::const_iterator&gt;( <span class="comment">/* what: */</span> initial_primitives, <span class="comment">/* where_to: */</span> candidates_path );</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">if</span> ( err != EXIT_SUCCESS )  std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;saveBackup or savePrimitive exited with error! Code: &quot;</span> &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">else</span>                        std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;wrote to &quot;</span> &lt;&lt; candidates_path &lt;&lt; std::endl;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    } <span class="comment">//...save primitives</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;} <span class="comment">// ...Segmentation::segmentCli()</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="keyword">template</span> &lt; <span class="keyword">class    </span>_PointPrimitiveT</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;         , <span class="keyword">typename</span> _Scalar</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;         , <span class="keyword">class    </span>_PointPatchDistanceFunctorT</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         , <span class="keyword">class    </span>_PatchT</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;         , <span class="keyword">class    </span>_PointContainerT</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         &gt;  <span class="keywordtype">int</span></div>
<div class="line"><a name="l00507"></a><span class="lineno"><a class="line" href="class_g_f2_1_1_segmentation.html#a7e9a7a9553e58ce5f5bbaec4fbc73ee0">  507</a></span>&#160;<a class="code" href="class_g_f2_1_1_segmentation.html#a7e9a7a9553e58ce5f5bbaec4fbc73ee0">Segmentation::_tagPointsFromGroups</a>( _PointContainerT                 &amp; <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                  , _PatchT                     <span class="keyword">const</span>&amp; groups</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                                  , _PointPatchDistanceFunctorT <span class="keyword">const</span>&amp; pointPatchDistanceFunctor</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                                  , <span class="keywordtype">int</span>                         <span class="keyword">const</span>  gid_tag_name )</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;{</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">// set group tag for grouped points</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    std::vector&lt;bool&gt; visited( points.size(), false );</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> gid = 0; gid != groups.size(); ++gid )</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> pid_id = 0; pid_id != groups[gid].size(); ++pid_id )</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = groups[gid][pid_id].first;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            visited.at(pid) = <span class="keyword">true</span>; <span class="comment">// TODO: change to []</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].setTag( gid_tag_name, gid );</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">// add left out points to closest patch</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != points.size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">if</span> ( visited[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>] )</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        _Scalar     min_dist = std::numeric_limits&lt;_Scalar&gt;::max(), <a class="code" href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordtype">int</span>         min_gid  = 0;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> gid = 1; gid != groups.size(); ++gid )</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="keywordflow">if</span> ( (<a class="code" href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a> = pointPatchDistanceFunctor.template evalSpatial&lt;_PointPrimitiveT&gt;(pid, groups[gid], points)) &lt; min_dist )</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                min_dist = <a class="code" href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                min_gid  = gid;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].setTag( gid_tag_name, min_gid );</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;} <span class="comment">// ...Segmentation::tagPointsFromGroups()</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;} <span class="comment">//...ns GF2</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="preprocessor">#endif // GF2_SEGMENTATION_HPP</span></div>
<div class="ttc" id="my__ply__read_8m_html_ab6eb9cb199df2a09b72fbc4375c0c335"><div class="ttname"><a href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a></div><div class="ttdeci">pid</div><div class="ttdef"><b>Definition:</b> <a href="my__ply__read_8m_source.html#l00011">my_ply_read.m:11</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_common_params_html_a414729020b67204b42ca6ab1ad32aa5d"><div class="ttname"><a href="struct_g_f2_1_1_common_params.html#a414729020b67204b42ca6ab1ad32aa5d">GF2::CommonParams::scale</a></div><div class="ttdeci">_Scalar scale</div><div class="ttdoc">Scale parameter of input. </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00014">parameters.h:14</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_candidate_generator_params_html_aca171dc5b21762fff8cde4c504ccdf42"><div class="ttname"><a href="struct_g_f2_1_1_candidate_generator_params.html#aca171dc5b21762fff8cde4c504ccdf42">GF2::CandidateGeneratorParams::patch_spatial_weight</a></div><div class="ttdeci">_Scalar patch_spatial_weight</div><div class="ttdoc">Weight of spatial term in  regionGrowing distance functor. Used in Segmentation::patchify() and Mergi...</div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00078">parameters.h:78</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1util_html_a76af03f83085374160be9ba6570d1955"><div class="ttname"><a href="namespace_g_f2_1_1util.html#a76af03f83085374160be9ba6570d1955">GF2::util::saveBackup</a></div><div class="ttdeci">std::string saveBackup(std::string path)</div><div class="ttdoc">_saveSafe Saves backups of the path to be overwritten. If .0.bak exists, try .1.bak, etc. </div><div class="ttdef"><b>Definition:</b> <a href="disk_util_8hpp_source.html#l00014">diskUtil.hpp:14</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_candidate_generator_params_html"><div class="ttname"><a href="struct_g_f2_1_1_candidate_generator_params.html">GF2::CandidateGeneratorParams</a></div><div class="ttdoc">Collection of parameters for CandidateGenerator::generate. </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00033">parameters.h:33</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_common_params_html_aab94199958a72779c5067ef29b406ee9"><div class="ttname"><a href="struct_g_f2_1_1_common_params.html#aab94199958a72779c5067ef29b406ee9">GF2::CommonParams::angles</a></div><div class="ttdeci">std::vector&lt; _Scalar &gt; angles</div><div class="ttdoc">Desired angles. </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00017">parameters.h:17</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_candidate_generator_params_html_a250e7a620373964d77ff805f6c7efb09"><div class="ttname"><a href="struct_g_f2_1_1_candidate_generator_params.html#a250e7a620373964d77ff805f6c7efb09">GF2::CandidateGeneratorParams::printPatchDistMode</a></div><div class="ttdeci">std::string printPatchDistMode() const </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00128">parameters.h:128</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_candidate_generator_params_html_a961cb3b2007b17476026e82b833978ef"><div class="ttname"><a href="struct_g_f2_1_1_candidate_generator_params.html#a961cb3b2007b17476026e82b833978ef">GF2::CandidateGeneratorParams::nn_K</a></div><div class="ttdeci">int nn_K</div><div class="ttdoc">Number of points used for primitive fitting. Used in Segmentation::orientPoints(), Segmentation::regionGrow() relayed from Segmentation::patchify(). </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00073">parameters.h:73</a></div></div>
<div class="ttc" id="class_g_f2_1_1_segmentation_html_ab540cb80acb78ea18b5306b7ffbbd389"><div class="ttname"><a href="class_g_f2_1_1_segmentation.html#ab540cb80acb78ea18b5306b7ffbbd389">GF2::Segmentation::orientPoints</a></div><div class="ttdeci">static int orientPoints(_PointContainerT &amp;points, _Scalar const scale, int const nn_K)</div><div class="ttdef"><b>Definition:</b> <a href="segmentation_8hpp_source.html#l00025">segmentation.hpp:25</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_candidate_generator_params_html_a6d923c38a3c5b62f6ad57e365c016d09"><div class="ttname"><a href="struct_g_f2_1_1_candidate_generator_params.html#a6d923c38a3c5b62f6ad57e365c016d09">GF2::CandidateGeneratorParams::parsePatchDistMode</a></div><div class="ttdeci">int parsePatchDistMode(std::string const &amp;patch_dist_mode_string)</div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00093">parameters.h:93</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_candidate_generator_params_html_ac2ede42aac59593b6d19eb03639955e9"><div class="ttname"><a href="struct_g_f2_1_1_candidate_generator_params.html#ac2ede42aac59593b6d19eb03639955e9">GF2::CandidateGeneratorParams::patch_dist_limit_mult</a></div><div class="ttdeci">_Scalar patch_dist_limit_mult</div><div class="ttdoc">Patchify takes &quot;patch_dist_limit * scale&quot; as maximum spatial distance. Used in Segmentation::patchify...</div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00069">parameters.h:69</a></div></div>
<div class="ttc" id="fmincon__merged_8m_html_a24ea4de43963cf4fe19a84bb8e3cfdf7"><div class="ttname"><a href="fmincon__merged_8m.html#a24ea4de43963cf4fe19a84bb8e3cfdf7">fit_lines</a></div><div class="ttdeci">fit_lines</div><div class="ttdef"><b>Definition:</b> <a href="fmincon__merged_8m_source.html#l00091">fmincon_merged.m:91</a></div></div>
<div class="ttc" id="lp_8m_html_a629c932e04d057de3f60912da6e565c2"><div class="ttname"><a href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a></div><div class="ttdeci">cloud[Px, Py, Pz,~]</div><div class="ttdef"><b>Definition:</b> <a href="lp_8m_source.html#l00014">lp.m:14</a></div></div>
<div class="ttc" id="class_g_f2_1_1_segmentation_html_a7e9a7a9553e58ce5f5bbaec4fbc73ee0"><div class="ttname"><a href="class_g_f2_1_1_segmentation.html#a7e9a7a9553e58ce5f5bbaec4fbc73ee0">GF2::Segmentation::_tagPointsFromGroups</a></div><div class="ttdeci">static int _tagPointsFromGroups(_PointContainerT &amp;points, _PatchT const &amp;groups, _PointPatchDistanceFunctorT const &amp;pointPatchDistanceFunctor, int const gid_tag_name)</div><div class="ttdef"><b>Definition:</b> <a href="segmentation_8hpp_source.html#l00507">segmentation.hpp:507</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1processing_html_a58cba102f9c9b0bcc70da6250e3ced17"><div class="ttname"><a href="namespace_g_f2_1_1processing.html#a58cba102f9c9b0bcc70da6250e3ced17">GF2::processing::appendAnglesFromGenerator</a></div><div class="ttdeci">int appendAnglesFromGenerator(_AnglesContainerT &amp;angles, _Scalar &amp;angle_gen, char verbose=true)</div><div class="ttdoc">Adds angles from generator to in/out vector angles. </div><div class="ttdef"><b>Definition:</b> <a href="processing_2util_8hpp_source.html#l00071">util.hpp:71</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_candidate_generator_params_html_a7a1887ccfea503e1f7cc8882e774231f"><div class="ttname"><a href="struct_g_f2_1_1_candidate_generator_params.html#a7a1887ccfea503e1f7cc8882e774231f">GF2::CandidateGeneratorParams::angle_limit</a></div><div class="ttdeci">_Scalar angle_limit</div><div class="ttdoc">Angle threshold for similar lines. Used in Segmentation::patchify() and Merging::mergeSameDirGids(). </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00060">parameters.h:60</a></div></div>
<div class="ttc" id="globfit_8m_html_ab9a89211ecb71d18bbd259853fda1c54"><div class="ttname"><a href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div><div class="ttdeci">points</div><div class="ttdef"><b>Definition:</b> <a href="globfit_8m_source.html#l00007">globfit.m:7</a></div></div>
<div class="ttc" id="globfit_8m_html_a3d6cbfbc95fcc0bac7015e7f5743e466"><div class="ttname"><a href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a></div><div class="ttdeci">end end scale</div><div class="ttdef"><b>Definition:</b> <a href="globfit_8m_source.html#l00026">globfit.m:26</a></div></div>
<div class="ttc" id="class_g_f2_1_1_segmentation_html_ab70d70310afdee9b7c82ec995024b668"><div class="ttname"><a href="class_g_f2_1_1_segmentation.html#ab70d70310afdee9b7c82ec995024b668">GF2::Segmentation::segmentCli</a></div><div class="ttdeci">static int segmentCli(int argc, char **argv)</div><div class="ttdoc">Step 1. Generates primitives from a cloud. Reads &quot;cloud.ply&quot; and saves &quot;candidates.txt&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="segmentation_8hpp_source.html#l00341">segmentation.hpp:341</a></div></div>
<div class="ttc" id="compare_mosek_gurobi_8m_html_ab28bbea71e3faec8c14dd00b8733c8a9"><div class="ttname"><a href="compare_mosek_gurobi_8m.html#ab28bbea71e3faec8c14dd00b8733c8a9">m</a></div><div class="ttdeci">read gurobi m</div><div class="ttdef"><b>Definition:</b> <a href="compare_mosek_gurobi_8m_source.html#l00009">compareMosekGurobi.m:9</a></div></div>
<div class="ttc" id="get__line_8m_html_a4fa05b1f00fcde100685cc887554b93b"><div class="ttname"><a href="get__line_8m.html#a4fa05b1f00fcde100685cc887554b93b">line</a></div><div class="ttdeci">line</div><div class="ttdef"><b>Definition:</b> <a href="get__line_8m_source.html#l00003">get_line.m:3</a></div></div>
<div class="ttc" id="class_g_f2_1_1_segmentation_html_a5060de9c9444d728400f8ea8e0f575df"><div class="ttname"><a href="class_g_f2_1_1_segmentation.html#a5060de9c9444d728400f8ea8e0f575df">GF2::Segmentation::patchify</a></div><div class="ttdeci">static int patchify(_PrimitiveContainerT &amp;patches, _PointContainerT &amp;points, _Scalar const scale, std::vector&lt; _Scalar &gt; const &amp;angles, _PatchPatchDistanceFunctorT const &amp;patchPatchDistanceFunctor, int const nn_K)</div><div class="ttdoc">patchify Groups unoriented points into oriented patches represented by a single primitive (2) group t...</div><div class="ttdef"><b>Definition:</b> <a href="segmentation_8hpp_source.html#l00146">segmentation.hpp:146</a></div></div>
<div class="ttc" id="my__types_8h_html"><div class="ttname"><a href="my__types_8h.html">my_types.h</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_candidate_generator_params_html_aa5da1cdf35c2e2b2ff15fb267c45324d"><div class="ttname"><a href="struct_g_f2_1_1_candidate_generator_params.html#aa5da1cdf35c2e2b2ff15fb267c45324d">GF2::CandidateGeneratorParams::patch_dist_mode</a></div><div class="ttdeci">PatchPatchDistMode patch_dist_mode</div><div class="ttdoc">Regiongrow uses this option to determine which functor to use for a patch-patch distance. Used in Segmentation::patchify(). </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00064">parameters.h:64</a></div></div>
<div class="ttc" id="segmentation_8h_html"><div class="ttname"><a href="segmentation_8h.html">segmentation.h</a></div></div>
<div class="ttc" id="lp_8m_html_a4ef62f8677d097c35ad5abfa948c8004"><div class="ttname"><a href="lp_8m.html#a4ef62f8677d097c35ad5abfa948c8004">pid2</a></div><div class="ttdeci">fill line for pid2</div><div class="ttdef"><b>Definition:</b> <a href="lp_8m_source.html#l00048">lp.m:48</a></div></div>
<div class="ttc" id="class_g_f2_1_1_segmentation_html_abd83c460861845398b5e145fc3fd505e"><div class="ttname"><a href="class_g_f2_1_1_segmentation.html#abd83c460861845398b5e145fc3fd505e">GF2::Segmentation::regionGrow</a></div><div class="ttdeci">static int regionGrow(_PointContainerT &amp;points, _PatchesT &amp;groups_arg, _Scalar const , _PatchPatchDistanceFunctorT const &amp;patchPatchDistanceFunctor, int const gid_tag_name, int const nn_K)</div><div class="ttdoc">Greedy region growing. </div><div class="ttdef"><b>Definition:</b> <a href="segmentation_8hpp_source.html#l00209">segmentation.hpp:209</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_representative_sqr_patch_patch_distance_functor_t_html"><div class="ttname"><a href="struct_g_f2_1_1_representative_sqr_patch_patch_distance_functor_t.html">GF2::RepresentativeSqrPatchPatchDistanceFunctorT</a></div><div class="ttdoc">Distance is combined by spatial and angular terms according to formula: . It&#39;s basically an ellipse i...</div><div class="ttdef"><b>Definition:</b> <a href="patch_distance_functors_8h_source.html#l00293">patchDistanceFunctors.h:293</a></div></div>
<div class="ttc" id="fmincon__merged_8m_html_a4ca269cf93df1b512b52174c1a256fe5"><div class="ttname"><a href="fmincon__merged_8m.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a></div><div class="ttdeci">dir</div><div class="ttdef"><b>Definition:</b> <a href="fmincon__merged_8m_source.html#l00141">fmincon_merged.m:141</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1segmentation_html_ab1b3fa4a3c6e32b0912447d24457be4f"><div class="ttname"><a href="namespace_g_f2_1_1segmentation.html#ab1b3fa4a3c6e32b0912447d24457be4f">GF2::segmentation::PidLid</a></div><div class="ttdeci">std::pair&lt; int, int &gt; PidLid</div><div class="ttdef"><b>Definition:</b> <a href="segmentation_8h_source.html#l00007">segmentation.h:7</a></div></div>
<div class="ttc" id="class_g_f2_1_1_segmentation_html_a5455cad2a3e2f91b7dc498d7139bb961"><div class="ttname"><a href="class_g_f2_1_1_segmentation.html#a5455cad2a3e2f91b7dc498d7139bb961">GF2::Segmentation::fitLocal</a></div><div class="ttdeci">static int fitLocal(_PrimitiveContainerT &amp;lines, _PointContainerPtrT const cloud, std::vector&lt; int &gt; const *indices, int const K, float const radius, bool const soft_radius, std::vector&lt; int &gt; *mapping)</div><div class="ttdoc">propose Create local fits to local neighbourhoods, these will be the point orientations. </div><div class="ttdef"><b>Definition:</b> <a href="segmentation_8hpp_source.html#l00061">segmentation.hpp:61</a></div></div>
<div class="ttc" id="struct_g_f2_1_1segmentation_1_1_patch_html"><div class="ttname"><a href="struct_g_f2_1_1segmentation_1_1_patch.html">GF2::segmentation::Patch</a></div><div class="ttdef"><b>Definition:</b> <a href="segmentation_8h_source.html#l00010">segmentation.h:10</a></div></div>
<div class="ttc" id="containers_8hpp_html"><div class="ttname"><a href="containers_8hpp.html">containers.hpp</a></div></div>
<div class="ttc" id="point__plane_8m_html_a93606e6aea9563f73484a536c9c5636d"><div class="ttname"><a href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a></div><div class="ttdeci">dist</div><div class="ttdef"><b>Definition:</b> <a href="point__plane_8m_source.html#l00003">point_plane.m:3</a></div></div>
<div class="ttc" id="parameters_8h_html"><div class="ttname"><a href="parameters_8h.html">parameters.h</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1containers_html_a3c5bd8be9debd9a6eafe6bb99af7e26e"><div class="ttname"><a href="namespace_g_f2_1_1containers.html#a3c5bd8be9debd9a6eafe6bb99af7e26e">GF2::containers::add</a></div><div class="ttdeci">static _InnerT &amp; add(std::vector&lt; std::vector&lt; _InnerT &gt; &gt; &amp;prims, int gid, _InnerT const &amp;primitive)</div><div class="ttdef"><b>Definition:</b> <a href="containers_8hpp_source.html#l00013">containers.hpp:13</a></div></div>
<div class="ttc" id="scale__optimization_8m_html_aa3bc9f08cad6c0b386cc994140e1ce2e"><div class="ttname"><a href="scale__optimization_8m.html#aa3bc9f08cad6c0b386cc994140e1ce2e">size</a></div><div class="ttdeci">size(unique(A,'rows')) subplot(121) hist(qo</div></div>
<div class="ttc" id="function__handle_8m_html_a03d2a3685385f82943527be28e035ad9"><div class="ttname"><a href="function__handle_8m.html#a03d2a3685385f82943527be28e035ad9">path</a></div><div class="ttdeci">function it is only possible to succesfully evaluate the resulting handle when the function the handle refers to was on the MATLAB search at the time the handle was created To create valid handles to arbitrarty functions possibly not on the search path</div><div class="ttdef"><b>Definition:</b> <a href="function__handle_8m_source.html#l00001">function_handle.m:1</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Sep 8 2014 11:09:05 for globOpt by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
