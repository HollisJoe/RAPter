<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>globOpt: src/main.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">globOpt
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_8610465afff0bf9a4df36459514a261b.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">main.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="main_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &quot;pcl/io/pcd_io.h&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;pcl/io/ply_io.h&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;pcl/io/obj_io.h&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;pcl/PolygonMesh.h&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;boost/program_options.hpp&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;amDefines.h&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;pcltools/util.hpp&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_c_v_tools_8h.html">CVTools.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="plane_primitive_8h.html">primitives/planePrimitive.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hough_line_8h.html">primitives/houghLine.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="k_means_8h.html">kmeans/kMeans.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cuboid_ransac_8h.html">cuboidRansac.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="optimization_8h.html">optimization.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="glob_fit2_8h.html">globFit2.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="local_analysis_8h.html">localAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ground__truth_8h.html">ground_truth/ground_truth.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="io_8h.html">globfit2/io/io.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;smartgeometry/util.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#ifdef USE_PEARL</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#   include &quot;pearl/pearl.hpp&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#endif // use_pearl</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">using namespace </span>am;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">using namespace </span>GF2;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2fa81b0b1e697751b616662662702da52ef">   34</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2f">METHOD_TYPE</a> { <a class="code" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2fa81b0b1e697751b616662662702da52ef">PEARL_METHOD</a>, <a class="code" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2face89cb6e0896990e7dc31a5a98c99ec6">GF2_METHOD</a> } <a class="code" href="main_8cpp.html#af1b37534bc363a9d22a3ad80ef5d1e0a">method</a> = <a class="code" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2face89cb6e0896990e7dc31a5a98c99ec6">GF2_METHOD</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// predecl</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keywordtype">int</span> <a class="code" href="main_8cpp.html#a8a987f690eac0c71f97f2b502e27d651">autodiff_main</a>();</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keywordtype">int</span> <a class="code" href="main_8cpp.html#a7180da18e08cbcc0e9d122b0f6c45705">testCuda</a>();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> PrimitivesT, <span class="keyword">class</span> Po<span class="keywordtype">int</span>sPtrT, <span class="keyword">typename</span> Scalar = <span class="keyword">typename</span> PrimitivesT::value_type::Scalar&gt; <span class="keywordtype">int</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="main_8cpp.html#a1e698d8a6ececaba8a2d0156a06188ae">   41</a></span>&#160;<a class="code" href="main_8cpp.html#a1e698d8a6ececaba8a2d0156a06188ae">sanityCheck</a>( PrimitivesT    <span class="keyword">const</span>&amp; gt_lines</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;             , PrimitivesT  <span class="keyword">const</span>&amp; lines</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;             , <a class="code" href="namespaceam.html#a06dbc09d269453511f8b4349f693890c">am::MaskType</a> <span class="keyword">const</span>&amp; opt_mask</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;             , PointsPtrT          <a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;             , Eigen::Matrix&lt;Scalar,-1,1&gt; <span class="keyword">const</span>&amp; lambdas</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;             , Scalar       <span class="keyword">const</span>  gf2_scale</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;             , std::vector&lt;Scalar&gt; <span class="keyword">const</span>&amp; desired_angles</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;             , Scalar       <span class="keyword">const</span>  trunc_pw_angle_at)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keyword">using</span> std::vector;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> PrimitivesT::value_type PrimitiveT;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    vector&lt; vector&lt;PrimitiveT&gt; <span class="keyword">const</span>* &gt; final_lines = { &amp;lines <span class="comment">/*, &amp;gt_lines*/</span> };</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    vector&lt;int&gt; gt_mask( gt_lines.size(), 1 );</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    vector&lt; am::MaskType const* &gt; final_masks;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    final_masks.push_back( &amp;opt_mask );</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">//final_masks.push_back( &amp;gt_mask );</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    vector&lt; string &gt; captions = { <span class="stringliteral">&quot;OPTIMIZED_ENERGY: &quot;</span>,</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                                  <span class="stringliteral">&quot;       GT_ENERGY: &quot;</span> };</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    Eigen::Matrix&lt;Scalar,-1,1&gt; energies(4,1);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a> = 0; <a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a> != final_lines.size(); ++<a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a> )</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="comment">// get energy</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        std::cout &lt;&lt; captions[<a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a>] &lt;&lt; GlobFit2::queryEnergy( energies, *(final_masks[<a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a>]), *(final_lines[i]), cloud, lambdas, gf2_scale, desired_angles, 0.01, trunc_pw_angle_at ) &lt;&lt; <span class="stringliteral">&quot; = &quot;</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="comment">// print energy</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> row = 0; row != energies.rows(); ++row )</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            std::cout &lt;&lt; energies(row) * lambdas(row) &lt;&lt; ((row == energies.rows()-1) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; + &quot;</span>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot; = &quot;</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> row = 0; row != energies.rows(); ++row )</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            std::cout &lt;&lt; energies(row) &lt;&lt; <span class="stringliteral">&quot; * &quot;</span> &lt;&lt; lambdas(row) &lt;&lt; ((row == energies.rows()-1) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; + &quot;</span>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        std::cout &lt;&lt; std::endl;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> PrimitiveT&gt; std::vector&lt;PrimitiveT&gt;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<a class="code" href="main_8cpp.html#a5ae9eabe195b770f0011d095f1a9f544">gt_primitives_from_lines</a>( std::vector&lt;LinePrimitive&gt; <span class="keyword">const</span>&amp; gt_lines );</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">template</span> &lt;&gt; std::vector&lt;LinePrimitive&gt;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="main_8cpp.html#a89b2610b21ce55fd07b0bd9661ce9174">   82</a></span>&#160;<a class="code" href="main_8cpp.html#a89b2610b21ce55fd07b0bd9661ce9174">gt_primitives_from_lines&lt;LinePrimitive&gt;</a>( std::vector&lt;LinePrimitive&gt; <span class="keyword">const</span>&amp; gt_lines )</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> gt_lines;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;};</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keyword">template</span> &lt;&gt; std::vector&lt;PlanePrimitive&gt;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="main_8cpp.html#a634f80b6ca0deecea4521100c8baf2dd">   87</a></span>&#160;<a class="code" href="main_8cpp.html#a634f80b6ca0deecea4521100c8baf2dd">gt_primitives_from_lines&lt;PlanePrimitive&gt;</a>( std::vector&lt;LinePrimitive&gt; <span class="keyword">const</span>&amp; gt_lines )</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> PlanePrimitive::Scalar Scalar;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    std::vector&lt;PlanePrimitive&gt; gt_primitives; gt_primitives.reserve( gt_lines.size() );</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> = 0; <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> != gt_lines.size(); ++<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> )</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <a class="code" href="class_g_f2_1_1_line_primitive.html">LinePrimitive</a>               <a class="code" href="get__line_8m.html#a4fa05b1f00fcde100685cc887554b93b">line</a> = gt_lines.at( <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> );</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        Eigen::Matrix&lt;Scalar,3,1&gt;   <a class="code" href="fmincon__merged_8m.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a> = line.<a class="code" href="class_g_f2_1_1_line_primitive.html#ab0227ccf683b47844df88e0b4932520b">dir</a>().cross( Eigen::Matrix&lt;Scalar,3,1&gt;::UnitZ() );</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        gt_primitives.push_back( <a class="code" href="class_g_f2_1_1_plane_primitive.html">PlanePrimitive</a>(line.<a class="code" href="class_g_f2_1_1_line_primitive.html#ab90bbdb79ebafc962105dce3cbf075d8">pos</a>(),<a class="code" href="fmincon__merged_8m.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a>) );</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> gt_primitives;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;};</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">class</span> PrimitiveT, <span class="keyword">class</span> Po<span class="keywordtype">int</span>sPtrT,<span class="keyword">typename</span> Scalar = <span class="keyword">typename</span> PrimitiveT::value_type::Scalar &gt;</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="main_8cpp.html#a2e2baf265c4171b4472823d96c374a99">  103</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="main_8cpp.html#a2e2baf265c4171b4472823d96c374a99">solve</a>( PointsPtrT <a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;           , Scalar                     <span class="keyword">const</span> working_scale</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;           , std::vector&lt;Scalar&gt;        <span class="keyword">const</span>&amp; gf2_desired_angles</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;           , std::vector&lt;LinePrimitive&gt; <span class="keyword">const</span>&amp; gt_lines</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;           , <span class="keywordtype">bool</span>                       <span class="keyword">const</span> show_clusters</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;           , <span class="keywordtype">int</span>                        <span class="keyword">const</span> desiredK</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;           , Eigen::Matrix&lt;float,-1,1&gt;  <span class="keyword">const</span> lambdas</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;           , <span class="keywordtype">int</span>                        <span class="keyword">const</span> gf2_nThreads</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;           , <span class="keywordtype">int</span>                        <span class="keyword">const</span> gf2_thread_depth</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;           , Scalar                     <span class="keyword">const</span> gf2_trunc_pw_angle_at</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;           , <a class="code" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2f">METHOD_TYPE</a>                <span class="keyword">const</span> <a class="code" href="main_8cpp.html#af1b37534bc363a9d22a3ad80ef5d1e0a">method</a></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;           , <span class="keywordtype">float</span>                      <span class="keyword">const</span> gf2_k_explore_ratio</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;           , <span class="keywordtype">float</span>                      <span class="keyword">const</span> gf2_filter_coeff</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;           , <span class="keywordtype">float</span>                      <span class="keyword">const</span> gf2_angle_similarity</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;           , <span class="keywordtype">int</span>                        <span class="keyword">const</span> gf2_add_n_friends</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;           , <span class="keywordtype">int</span>                        <span class="keyword">const</span> argc</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;           , <span class="keywordtype">char</span>**                     <span class="keyword">const</span> argv</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;           #<span class="keywordflow">if</span> USE_PEARL</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;           , Pearl::Params              <span class="keyword">const</span>* p_pearl_params = NULL</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;           #endif</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;           )</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;{</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keyword">typedef</span> vector&lt;PrimitiveT&gt; PrimitivesT;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    PrimitivesT gt_primitives = gt_primitives_from_lines&lt;PrimitiveT&gt;( gt_lines );</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span>         DIM       = (<a class="code" href="globfit_8m.html#a59cd6a1194eac609179091dc9dcc724b">PrimitiveT::Dim</a> == 6) ? 2 : 3;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keyword">const</span> std::string timestamp = <a class="code" href="namespace_g_f2_1_1util.html#ac0845eadda4c0f7995e5511792682cd0">smartgeometry::util::timestamp2Str</a>();</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">const</span> std::string out_dir = timestamp.substr(1) + <span class="stringliteral">&quot;/&quot;</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    boost::filesystem::create_directory( out_dir );</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keyword">auto</span> lambdas2 = lambdas;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">//lambdas2(0) *= 0.1f;</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    vector&lt;PrimitiveClustering&lt;PrimitivesT&gt; &gt; clusterings, clusterings2;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    PrimitivesT candidates, candidates2;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// output</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="namespaceam.html#a06dbc09d269453511f8b4349f693890c">MaskType</a> opt_mask( candidates.size(), 0 ), opt_mask2;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    vector&lt;int&gt; labels;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keyword">struct</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordtype">int</span>         k       = -1;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordtype">float</span>       energy  = FLT_MAX;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <a class="code" href="namespaceam.html#a06dbc09d269453511f8b4349f693890c">MaskType</a>    opt_mask;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    } best_mask;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> ( method == <a class="code" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2fa81b0b1e697751b616662662702da52ef">PEARL_METHOD</a> )</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#if USE_PEARL</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor"></span>        std::cout &lt;&lt; <span class="stringliteral">&quot;candidates.size(): &quot;</span> &lt;&lt; candidates.size() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;running pearl with &quot;</span> &lt;&lt; <span class="stringliteral">&quot;beta: &quot;</span> &lt;&lt; p_pearl_params-&gt;beta</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot;smooth: &quot;</span> &lt;&lt; p_pearl_params-&gt;lambdas(2) &lt;&lt; std::endl;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="comment">// run Pearl</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="fmincon__merged_8m.html#ab0415214b5aa9d19959027ba5fe55292">Pearl::run</a>( labels</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    , candidates</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    , cloud</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                    , NULL</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    , *p_pearl_params</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    , NULL <span class="comment">/*beta_range.size() &gt; 1 ? NULL : &amp;label_history</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">                                                      , beta_range.size() &gt; 1 ? NULL : &amp;line_history */</span>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="comment">//target_mask.resize( candidates.size(), 0 );</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment">// parse output labels to opt_mask</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;returned candidates.size(): &quot;</span> &lt;&lt; candidates.size() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        opt_mask.resize( candidates.size(), 0 );</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != labels.size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )     opt_mask[ labels[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>] ] = 1;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor"></span>        std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;define USE_PEARL 1 to run this&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor"></span>    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">else</span> <span class="comment">// GF2</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> filter_coeff    = gf2_filter_coeff      &lt; 0.f ? ((DIM==2)   ?      .1f :   .75f) : gf2_filter_coeff;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> angle_sim       = gf2_angle_similarity  &lt; 0.f ? ((DIM == 2) ?  0.0001f : 0.005f) : gf2_angle_similarity;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> add_n_friends   = gf2_add_n_friends     &lt; 0.f ? ((DIM==2)   ?       40 :     2 ) : gf2_add_n_friends;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            LocalAnalysis::runSimpler( <span class="comment">/*       out_clusterings: */</span> clusterings</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                       , <span class="comment">/*              points: */</span> cloud</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                       , <span class="comment">/*       working_scale: */</span> working_scale</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                       , <span class="comment">/* angle_sim_threshold: */</span> angle_sim</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                                       , <span class="comment">/*      max_neigh_size: */</span> ((DIM == 2) ? 10   : 20  )</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                                       , <span class="comment">/*      desired_angles: */</span> gf2_desired_angles</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                       , <span class="comment">/*      is_friend_func: */</span> &amp;(LocalAnalysis::matching&lt;Scalar&gt;)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                       , <span class="comment">/*         addNFriends: */</span> add_n_friends</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                       , <span class="comment">/*        filter_coeff: */</span> filter_coeff</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                       , <span class="comment">/*    input_primitives: */</span> static_cast&lt;PrimitivesT*&gt;( NULL )</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                       , <span class="comment">/* clust_friends_trunc: */</span> gf2_trunc_pw_angle_at</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                       );</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">if</span> ( show_clusters )</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <a class="code" href="test0_8m.html#a5d402d6989f84833aaf30ee093d25eb6">LocalAnalysis::display</a>( clusterings[0].lines, cloud, 0.1f, &amp;(clusterings[0]) ); <span class="comment">// display new lines temporarily</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">// store candidate generation output</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        candidates = clusterings[0].lines;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;desiredK: &quot;</span> &lt;&lt; desiredK &lt;&lt; std::endl;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        std::ofstream ks_energies( out_dir + <span class="stringliteral">&quot;ks_energies.txt&quot;</span> );</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordtype">int</span> start_k = std::min( desiredK  , static_cast&lt;int&gt;(floor((2.f - gf2_k_explore_ratio) * desiredK)) );</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordtype">int</span> stop_k  = std::max( desiredK+1, static_cast&lt;int&gt;(ceil (       gf2_k_explore_ratio  * desiredK)) );</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;start_k: &quot;</span> &lt;&lt; start_k &lt;&lt; <span class="stringliteral">&quot;, stop_k: &quot;</span> &lt;&lt; stop_k &lt;&lt; std::endl;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="comment">// put desiredK in front, calculate neighbours afterwards</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        std::vector&lt;int&gt; ks;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            ks.push_back( desiredK );</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> k = start_k; k != stop_k; ++k )</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="keywordflow">if</span> ( k != desiredK )</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    ks.push_back( k );</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> k_id = 0; k_id != ks.size(); ++k_id )</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> k = ks[ k_id ];</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;running opt with &quot;</span> &lt;&lt; k &lt;&lt; std::endl;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordtype">float</span> tmp_energy = FLT_MAX;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="comment">// optimize</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            GlobFit2::optimize( <span class="comment">/*   [out]             mask: */</span> opt_mask</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                , <span class="comment">/* [in ]       candidates: */</span> candidates</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                , <span class="comment">/* [in ]       clustering: */</span> &amp;(clusterings[0])</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                , <span class="comment">/* [in ]           points: */</span> cloud</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                , <span class="comment">/* [in ]          lambdas: */</span> lambdas</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                , <span class="comment">/* [in ]            scale: */</span> working_scale</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                , <span class="comment">/* [in ]   desired_angles: */</span> gf2_desired_angles</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                                , <span class="comment">/* [in ]    restart_count: */</span> gf2_nThreads</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                , <span class="comment">/* [in ]    sa run_length: */</span> gf2_thread_depth</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                , <span class="comment">/* [in ]    inlier thresh: */</span> 0.01</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                , <span class="comment">/* [in ]   trunc at angle: */</span> gf2_trunc_pw_angle_at</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                , <span class="comment">/* [in ]      pnt indices: */</span> NULL</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                , <span class="comment">/* [in ]    target #lines: */</span> k</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                                , <span class="comment">/* [out]      assignments: */</span> <span class="comment">/*beta_range.size() &gt; 1 ? NULL : &amp;labels */</span> NULL</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                , <span class="comment">/* [out]  solution_energy: */</span> &amp;tmp_energy</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                , <span class="comment">/* [out] output_directory: */</span> &amp;out_dir );</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="comment">//            // split</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">//            PrimitivesT split_candidates;</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">//            GlobFit2::split( split_candidates</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">//                             , opt_mask</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">//                             , candidates</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">//                             , cloud );</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="comment">// second</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="comment">//GlobFit2::visualize( candidates, opt_mask, cloud, working_scale, gf2_desired_angles, NULL, NULL, labels.size() ? &amp;(labels) : NULL, false, true );</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> prim_id = 0; prim_id != opt_mask.size(); ++prim_id )</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    <span class="keywordflow">if</span> ( !opt_mask[prim_id] )   <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                    candidates2.push_back( candidates[prim_id] );</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                LocalAnalysis::runSimpler( <span class="comment">/*       out_clusterings: */</span> clusterings2</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                           , <span class="comment">/*              points: */</span> cloud</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                           , <span class="comment">/*       working_scale: */</span> working_scale</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                           , <span class="comment">/* angle_sim_threshold: */</span> -1.f</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                           , <span class="comment">/*      max_neigh_size: */</span> ((DIM == 2) ? 10 : 20  )</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                                           , <span class="comment">/*      desired_angles: */</span> gf2_desired_angles</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                           , <span class="comment">/*      is_friend_func: */</span> &amp;(LocalAnalysis::matching&lt;Scalar&gt;)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                           , <span class="comment">/*         addNFriends: */</span> -1</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                           , <span class="comment">/*        filter_coeff: */</span> 0.f <span class="comment">// filter_coeff</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                           , <span class="comment">/*    input_primitives: */</span> &amp;candidates2</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                                           , <span class="comment">/* clust_friends_trunc: */</span> gf2_trunc_pw_angle_at</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                                           );</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <a class="code" href="test0_8m.html#a5d402d6989f84833aaf30ee093d25eb6">LocalAnalysis::display</a>( clusterings2[0].lines, cloud, 0.1f, &amp;(clusterings2[0]) ); <span class="comment">// display new lines temporarily</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="comment">// optimize</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                GlobFit2::optimize( <span class="comment">/*   [out]             mask: */</span> opt_mask2</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                    , <span class="comment">/* [in ]       candidates: */</span> clusterings2[0].lines</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                                    , <span class="comment">/* [in ]       clustering: */</span> &amp;(clusterings2[0])</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                                    , <span class="comment">/* [in ]           points: */</span> cloud</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                    , <span class="comment">/* [in ]          lambdas: */</span> lambdas2</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                    , <span class="comment">/* [in ]            scale: */</span> working_scale</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                    , <span class="comment">/* [in ]   desired_angles: */</span> gf2_desired_angles</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                    , <span class="comment">/* [in ]    restart_count: */</span> gf2_nThreads</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                    , <span class="comment">/* [in ]    sa run_length: */</span> gf2_thread_depth</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                    , <span class="comment">/* [in ]    inlier thresh: */</span> 0.01</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                    , <span class="comment">/* [in ]   trunc at angle: */</span> gf2_trunc_pw_angle_at</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                    , <span class="comment">/* [in ]      pnt indices: */</span> NULL</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                    , <span class="comment">/* [in ]    target #lines: */</span> k</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                    , <span class="comment">/* [out]      assignments: */</span> <span class="comment">/*beta_range.size() &gt; 1 ? NULL : &amp;labels */</span> NULL</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                    , <span class="comment">/* [out]  solution_energy: */</span> &amp;tmp_energy</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                    , <span class="comment">/* [out] output_directory: */</span> &amp;out_dir );</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;opt_mask2: &quot;</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                std::cout&lt;&lt;<span class="stringliteral">&quot;opt_mask2:&quot;</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> <a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>=0;<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>!=opt_mask2.size();++<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    <span class="keywordflow">if</span> ( opt_mask2[<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>] )</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        std::cout&lt;&lt;vi&lt;&lt;<span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> vi=0;vi!=opt_mask2.size();++<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                    <span class="keywordflow">if</span> ( opt_mask2[vi] )</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                        std::cout &lt;&lt; <span class="stringliteral">&quot;clusterings2[0].lines[ &quot;</span> &lt;&lt; vi &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; clusterings2[0].lines[<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>]().transpose() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">if</span> ( ks.size() &gt; 1 ) <a class="code" href="pcd__viewer_2main_8cpp.html#aa774a711da49de54387dd20fddb3d1e9">GlobFit2::visualize</a>( candidates, opt_mask, cloud, working_scale, gf2_desired_angles, NULL, NULL, labels.size() ? &amp;(labels) : NULL, <span class="keyword">false</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            ks_energies &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; tmp_energy &lt;&lt; std::endl;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">if</span> ( tmp_energy &lt; best_mask.energy )</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                best_mask.energy    = tmp_energy;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                best_mask.k         = std::accumulate( opt_mask.begin(), opt_mask.end(), 0 );</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                best_mask.opt_mask  = opt_mask;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;storing k &quot;</span> &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot; as best, with mask: &quot;</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                std::cout &lt;&lt;<span class="stringliteral">&quot;opt_mask:&quot;</span>;<span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> <a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>=0;<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>!=best_mask.opt_mask.size();++<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>) <span class="keywordflow">if</span>(best_mask.opt_mask[<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>]) std::cout &lt;&lt; <a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;std::cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            ks_energies.close();</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordflow">if</span> ( stop_k - start_k &gt; 1 )</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                err = system( (<span class="stringliteral">&quot;gnuplot -e \&quot;plot &#39;&quot;</span> + out_dir + <span class="stringliteral">&quot;ks_energies.txt&#39; u 1:2 w points\&quot; -p&quot;</span>).c_str() );</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="keywordflow">if</span> ( err != EXIT_SUCCESS ) std::cerr &lt;&lt; <span class="stringliteral">&quot;system returned code &quot;</span> &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        opt_mask =  best_mask.opt_mask;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;min_k: &quot;</span> &lt;&lt; best_mask.k&lt;&lt; <span class="stringliteral">&quot; with energy &quot;</span> &lt;&lt; best_mask.energy &lt;&lt; std::endl;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;opt_mask:&quot;</span>;<span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> <a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>=0;<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>!=opt_mask.size();++<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>) <span class="keywordflow">if</span>(opt_mask[<a class="code" href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a>]) std::cout &lt;&lt; vi &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;std::cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    } <span class="comment">// if method == gf2...</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    sanityCheck&lt;PrimitivesT, MyCloud::Ptr, float&gt; ( gt_primitives, candidates, opt_mask, <a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a>, lambdas, working_scale, gf2_desired_angles, gf2_trunc_pw_angle_at );</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> ( clusterings2.size() &amp;&amp; clusterings2[0].lines.size() ) sanityCheck&lt;PrimitivesT, MyCloud::Ptr, float&gt; ( gt_primitives, clusterings2[0].lines, opt_mask2, cloud, lambdas2, working_scale, gf2_desired_angles, gf2_trunc_pw_angle_at );</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// dump</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="comment">// primitives</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        std::string primitives_out_path = out_dir + ( (DIM == 3) ? <span class="stringliteral">&quot;planes&quot;</span> : <span class="stringliteral">&quot;lines&quot;</span>) + <span class="stringliteral">&quot;.txt&quot;</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="class_g_f2_1_1_primitive.html">Primitive&lt;PrimitiveT::Dim&gt;::dump</a>( primitives_out_path</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                          , candidates</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                          , clusterings.size() ? &amp;(clusterings[0].lines_clusters)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                                               : (labels.size() ? &amp;labels</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                                                                                : NULL)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                          , NULL );</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> ( method == <a class="code" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2face89cb6e0896990e7dc31a5a98c99ec6">GF2_METHOD</a> )</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            primitives_out_path = out_dir + ( (DIM == 3) ? <span class="stringliteral">&quot;planes2&quot;</span> : <span class="stringliteral">&quot;lines2&quot;</span>) + <span class="stringliteral">&quot;.txt&quot;</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="class_g_f2_1_1_primitive.html">Primitive&lt;PrimitiveT::Dim&gt;::dump</a>( primitives_out_path</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                                              , clusterings2[0].lines</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                    , clusterings2.size() ? &amp;(clusterings2[0].lines_clusters)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                : (labels.size() ? &amp;labels</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                : NULL)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                , NULL );</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="comment">// cloud</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        pcl::io::savePCDFile( out_dir + <span class="stringliteral">&quot;cloud.pcd&quot;</span>, *cloud, am::util::pcl::allIndicesOf(cloud)-&gt;indices );</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="comment">// solution</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            ofstream opt_f( out_dir + <span class="stringliteral">&quot;solution.txt&quot;</span> );</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> k = 0; k != candidates.size(); ++k )</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="keywordflow">if</span> ( !opt_mask[k] ) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                opt_f &lt;&lt; k &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                opt_f &lt;&lt; candidates[k]().transpose() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="comment">// scale</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            opt_f &lt;&lt; <span class="stringliteral">&quot;scale\t&quot;</span> &lt;&lt; working_scale &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="comment">// desired angles</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            opt_f &lt;&lt; <span class="stringliteral">&quot;desired_angles\t&quot;</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> angi = 0; angi != gf2_desired_angles.size(); ++angi )</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                opt_f &lt;&lt; gf2_desired_angles[angi] &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            opt_f &lt;&lt; std::endl;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="comment">// args</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            opt_f &lt;&lt; <span class="stringliteral">&quot;#&quot;</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> argi = 0; argi != argc; ++argi )</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                opt_f &lt;&lt; argv[argi] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            opt_f &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            opt_f.close();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">// visualize output</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <a class="code" href="pcd__viewer_2main_8cpp.html#aa774a711da49de54387dd20fddb3d1e9">GlobFit2::visualize</a>( candidates, opt_mask, cloud, working_scale, gf2_desired_angles, NULL, NULL, labels.size() ? &amp;(labels) : NULL, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">if</span> ( method == <a class="code" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2face89cb6e0896990e7dc31a5a98c99ec6">GF2_METHOD</a> )</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <a class="code" href="pcd__viewer_2main_8cpp.html#aa774a711da49de54387dd20fddb3d1e9">GlobFit2::visualize</a>( clusterings2[0].lines, opt_mask2, cloud, working_scale, gf2_desired_angles, NULL, NULL, NULL, <span class="keyword">true</span>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="comment">//GlobFit2::visualize( gt_lines  , gt_mask , cloud, 1., NULL, NULL, labels.size() ? &amp;(labels) : NULL       );</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">  404</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv )</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;entering &quot;</span> &lt;&lt; std::endl; fflush(stdout);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keyword">using</span> std::vector;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keyword">typedef</span> <span class="keywordtype">float</span> Scalar;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// METHOD</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    std::string     method_name         = <span class="stringliteral">&quot;gf2&quot;</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// GT</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    std::string     gt_name             = <span class="stringliteral">&quot;pearl0&quot;</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordtype">float</span>           gt_spacing          = 50.f;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordtype">int</span>             gt_nLines           = 5;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordtype">float</span>           gt_decay            = .1f;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordtype">int</span>             gt_nRects           = 2;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordtype">int</span>             gt_nAngles          = 1;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">float</span>           gt_noise            = 0.003f;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordtype">int</span>             gt_nPoints          = 100;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordtype">float</span>           gt_scene_size       = 1.f;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">int</span>             gt_clutter_lines    = 0;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordtype">bool</span>            gt_3D               = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">//std::vector&lt;float&gt; gf2_desired_angles = {0,60.f*M_PI/180.f, M_PI_2, 120.f*M_PI/180.f, M_PI}; // {0, M_PI_2, M_PI };</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    std::vector&lt;float&gt; gf2_desired_angles = { 0, M_PI_2, M_PI }; <span class="comment">// {0, M_PI_2, M_PI };</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">//std::vector&lt;float&gt; gf2_desired_angles = { 0, M_PI_4, M_PI_2, M_PI_4 * 3.0, M_PI }; // {0, M_PI_2, M_PI };</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordtype">float</span> <span class="keyword">const</span>     Z                   = 0.f;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordtype">int</span>             seed                = 123456;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// GF2</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordtype">float</span>           gf2_scale           = .03f; <span class="comment">// main algorithm input parameter</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordtype">float</span>           gf2_trunc_pw_angle_at = 0.25f;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    Eigen::Matrix&lt;float,-1,1&gt; lambdas(4,1); lambdas &lt;&lt; 0.f, 1.f, 10.f, 0.f;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordtype">int</span>             gf2_nThreads        = 16;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordtype">int</span>             gf2_thread_depth    = 300;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordtype">float</span>           gf2_k_explore_ratio = 1.5;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordtype">float</span>           gf2_filter_coeff    = -1.f;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordtype">float</span>           gf2_angle_similarity = -1.f;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordtype">int</span>             gf2_add_n_friends   = 40;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordtype">bool</span>            show_clusters       = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="preprocessor">#if USE_PEARL</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor"></span>    Pearl::Params   pearl_params;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// --method gf2 --datacost 0.01 --pwcost 1000 --nthreads 128 --thread_depth 500 --sample_k 1.1 --sample_scale 1 --scale 0.05 --seed 123456 --3D --input-cloud /home/bontius/workspace/SmartGeometry/ransacTest/data/ --K 4</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">// --method gf2 --gt stairs --gt-nlines 6 --gt-spacing 4 --gt-decay 0.2 --nrects 8 --nangles 3 --noise 0.001 --datacost 0.01 --pwcost 1000 --npoints 2000 --nthreads 128 --thread_depth 500 --sample_k 1.1 --sample_scale 1 --nodebug --scale 0.05 --seed 123456 --3D --input-cloud /home/bontius/Downloads/house_050_noisy00000.pcd --K 4</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">// --method gf2 --gt stairs --gt-nlines 6 --gt-spacing 4 --gt-decay 0.15 --nrects 2 --nangles 2 --noise 0.005 --datacost 0.5 --pwcost 50 --npoints 300 --nthreads 128 --thread_depth 300 --sample_k 1.15 --sample_scale 1.5 --nodebug --scale 0.05 --show-clusters --trunc_at 0.4</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// --method gf2 --gt pearl0 --gt-nlines 6 --gt-spacing 60 --gt-decay 0.15 --nrects 2 --nangles 2 --noise 0.005 --datacost 0.5 --pwcost 50 --npoints 300 --nthreads 128 --thread_depth 300 --sample_k 1.15 --sample_scale 1.5 --nodebug --scale 0.05 --show-clusters --trunc_at 0.4</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// --method gf2 --gt stratified --gt-nlines 6 --gt-spacing 60 --gt-decay 0.15 --nrects 2 --nangles 2 --noise 0.005 --datacost 0.5 --pwcost 50 --npoints 300 --nthreads 128 --thread_depth 300 --sample_k 1.15 --sample_scale 1.5 --nodebug --scale 0.05 --show-clusters</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">// --method pearl --beta 1000 --smooth_weight 30000 --gt pearl0 --gt-nlines 6 --gt-spacing 60 --gt-decay 0.15 --nrects 8 --nangles 3 --noise 0.005 --datacost 0.5 --pwcost 50 --npoints 400 --nthreads 128 --thread_depth 300 --sample_k 1.0 --sample_scale 2 --nodebug --scale 0.05 --seed 123456</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// Sunday: --method gf2 --gt stairs --gt-nlines 6 --gt-spacing 4 --gt-decay 0.2 --nrects 8 --nangles 3 --noise 0.001 --datacost 0.5 --pwcost 1000 --npoints 2000 --nthreads  32 --thread_depth 500 --sample_k 1.2 --sample_scale 1 --nodebug --scale 0.05 --seed 123456 --3D --input-cloud /home/bontius/Downloads/house_050_noisy00000.pcd --K 3</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// CLI ARGS</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keyword">namespace </span>po = boost::program_options;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    po::variables_map vm;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="comment">// Declare the supported options.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        po::options_description desc(<span class="stringliteral">&quot;Allowed options&quot;</span>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        desc.add_options() <span class="comment">// --nodebug --gt stratified --nrects 4 --nangles 2 --noise 0.002 --method gf2 --datacost 2500 --pwcost 10 --npoints 500 --nthreads 8 --sample_k 1.2 --thread_depth 500 --sample_scale 1.5</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                (<span class="stringliteral">&quot;method&quot;</span>       , po::value&lt;std::string&gt;(&amp;method_name     )-&gt;default_value(<span class="stringliteral">&quot;gf2&quot;</span>   ), <span class="stringliteral">&quot;[method]    : pearl, __GF2__&quot;</span> )</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                (<span class="stringliteral">&quot;seed&quot;</span>         , po::value&lt;int        &gt;(&amp;seed            )-&gt;default_value(123456  ), <span class="stringliteral">&quot;[GT]        : random seed&quot;</span>)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                (<span class="stringliteral">&quot;gt&quot;</span>           , po::value&lt;std::string&gt;(&amp;gt_name         )-&gt;default_value(<span class="stringliteral">&quot;pearl0&quot;</span>), <span class="stringliteral">&quot;[GT]        : __pearl0__, stairs, stratified, (old: rects, 2rects)&quot;</span> )</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                (<span class="stringliteral">&quot;gt-spacing&quot;</span>   , po::value&lt;float      &gt;(&amp;gt_spacing      )-&gt;default_value(50.f    ), <span class="stringliteral">&quot;[GT][pearl] : how much space between \&quot;fence\&quot; lines; [stairs]: how much longer a line is than a column (i.e. 1.5)&quot;</span> )</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                (<span class="stringliteral">&quot;gt-nlines&quot;</span>    , po::value&lt;int        &gt;(&amp;gt_nLines       )-&gt;default_value(5       ), <span class="stringliteral">&quot;[GT][pearl] : how many \&quot;fence\&quot; lines              ; [stairs]: how many lines&quot;</span> )</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                (<span class="stringliteral">&quot;gt-decay&quot;</span>     , po::value&lt;float      &gt;(&amp;gt_decay        )-&gt;default_value(.1f     ), <span class="stringliteral">&quot;[GT]                                                  [stairs]: how much line lenght decays&quot;</span> )</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                (<span class="stringliteral">&quot;nrects&quot;</span>       , po::value&lt;int        &gt;(&amp;gt_nRects       )-&gt;default_value(2       ), <span class="stringliteral">&quot;[GT][rects] : how many autorectangles&quot;</span> )</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                (<span class="stringliteral">&quot;nangles&quot;</span>      , po::value&lt;int        &gt;(&amp;gt_nAngles      )-&gt;default_value(1       ), <span class="stringliteral">&quot;[GT][rects] : how many angles for the rectangles&quot;</span> )</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                (<span class="stringliteral">&quot;noise&quot;</span>        , po::value&lt;float      &gt;(&amp;gt_noise        )-&gt;default_value(0.003f  ), <span class="stringliteral">&quot;[GT]        : how much noise after sampling points&quot;</span> )</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                (<span class="stringliteral">&quot;npoints&quot;</span>      , po::value&lt;int        &gt;(&amp;gt_nPoints      )-&gt;default_value(100     ), <span class="stringliteral">&quot;[GT]        : how many points to use to sample the scene&quot;</span>)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                (<span class="stringliteral">&quot;sample_scale&quot;</span> , po::value&lt;float      &gt;(&amp;gt_scene_size   )-&gt;default_value(1.f     ), <span class="stringliteral">&quot;[GT]        : scene size (0.f..1.f)&quot;</span> )</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                (<span class="stringliteral">&quot;clutter-lines&quot;</span>, po::value&lt;int        &gt;(&amp;gt_clutter_lines)-&gt;default_value(0       ), <span class="stringliteral">&quot;[GT]        : add n randomly oriented lines crossing the center&quot;</span> )</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                (<span class="stringliteral">&quot;input-cloud&quot;</span>  , po::value&lt;std::string&gt;(                 )                         , <span class="stringliteral">&quot;[GT]        : load cloud instead of subsampling image - assumes that the generator image is the same!&quot;</span>)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                (<span class="stringliteral">&quot;input-lines&quot;</span>  , po::value&lt;std::string&gt;(                 )                         , <span class="stringliteral">&quot;[GT]        : use input lines instead of fitting locally&quot;</span>)</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                (<span class="stringliteral">&quot;2rect_angle&quot;</span>  , po::value&lt;float      &gt;(                 )                         , <span class="stringliteral">&quot;[GT]        : old, dunno&quot;</span> )</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                (<span class="stringliteral">&quot;scale&quot;</span>        , po::value&lt;float      &gt;(&amp;gf2_scale       )-&gt;default_value(0.03f   ), <span class="stringliteral">&quot;[GF2]       : operation scale&quot;</span> )</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                (<span class="stringliteral">&quot;datacost&quot;</span>     , po::value&lt;float      &gt;(&amp;lambdas(0)      )-&gt;default_value(-1.f    ), <span class="stringliteral">&quot;[GF2]       : lambda weight for GF2 data cost&quot;</span> )</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                (<span class="stringliteral">&quot;pwcost&quot;</span>       , po::value&lt;float      &gt;(&amp;lambdas(2)      )-&gt;default_value(-1.f    ), <span class="stringliteral">&quot;[GF2]       : lambda weight for GF2 pairwise cost&quot;</span>  )</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                (<span class="stringliteral">&quot;trunc-pw&quot;</span>     , po::value&lt;float      &gt;(&amp;gf2_trunc_pw_angle_at)-&gt;default_value(0.25f), <span class="stringliteral">&quot;[GF2]     : Truncate pw cost at this angle (in radians)&quot;</span> )</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                (<span class="stringliteral">&quot;nthreads&quot;</span>     , po::value&lt;int        &gt;(&amp;gf2_nThreads    )-&gt;default_value(16      ), <span class="stringliteral">&quot;[GF2][opt]  : how many initialisations&quot;</span> )</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                (<span class="stringliteral">&quot;thread_depth&quot;</span> , po::value&lt;int        &gt;(&amp;gf2_thread_depth)-&gt;default_value(300     ), <span class="stringliteral">&quot;[GF2][opt]  : how long to run one search thread&quot;</span> )</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                (<span class="stringliteral">&quot;filter-candidates&quot;</span>, po::value&lt;float  &gt;(&amp;gf2_filter_coeff)-&gt;default_value(-1.f    ), <span class="stringliteral">&quot;[GF2]       : candidate filtering strictness: 0.f - no filtering, 0.1f - allowing filtering, 1.f - filtering at scale, 100.f strict filtering&quot;</span>)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                (<span class="stringliteral">&quot;sample_k&quot;</span>     , po::value&lt;float      &gt;(&amp;gf2_k_explore_ratio)-&gt;default_value(1.2  ), <span class="stringliteral">&quot;[GF2][opt]  : how big range to sampl around GT #lines&quot;</span> )</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                (<span class="stringliteral">&quot;angle-thresh&quot;</span> , po::value&lt;float      &gt;(&amp;gf2_angle_similarity)-&gt;default_value(-1.f), <span class="stringliteral">&quot;[GF2]       : how strict is the clustering&quot;</span> )</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                (<span class="stringliteral">&quot;n-friends&quot;</span>    , po::value&lt;int        &gt;(&amp;gf2_add_n_friends)-&gt;default_value(-1     ), <span class="stringliteral">&quot;[GF2]       : how many &#39;perpendicular&#39; clusters&quot;</span> )</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                (<span class="stringliteral">&quot;K&quot;</span>            , po::value&lt;int        &gt;(                 )                        )</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                (<span class="stringliteral">&quot;nodebug&quot;</span>                                                                          , <span class="stringliteral">&quot;[PEARL]     : don&#39;t allow debug messages&quot;</span> )</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                (<span class="stringliteral">&quot;show-clusters&quot;</span>                                                                    , <span class="stringliteral">&quot;[2D]        : show proposed lines&quot;</span>)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                (<span class="stringliteral">&quot;3D&quot;</span>                                                                               , <span class="stringliteral">&quot;[3D]        : planes instead&quot;</span>)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                (<span class="stringliteral">&quot;gt-only&quot;</span>                                                                          , <span class="stringliteral">&quot;return after showing gt&quot;</span>)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                (<span class="stringliteral">&quot;help&quot;</span>                                                                             , <span class="stringliteral">&quot;produce help message&quot;</span> )</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="preprocessor">        #if USE_PEARL</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="preprocessor"></span>                (<span class="stringliteral">&quot;maxit&quot;</span>        , po::value&lt;int        &gt;(&amp;pearl_params.max_pearl_iterations), <span class="stringliteral">&quot;[pearl]: how many expand-refit iterations are allowed&quot;</span>)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                (<span class="stringliteral">&quot;beta&quot;</span>         , po::value&lt;float      &gt;(&amp;pearl_params.beta      )-&gt;default_value(-1.f) )</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                (<span class="stringliteral">&quot;smooth_weight&quot;</span>, po::value&lt;float      &gt;(&amp;pearl_params.lambdas(2))-&gt;default_value(-1.f) )</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        #endif</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                ;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        po::store(po::parse_command_line(argc, argv, desc), vm);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        po::notify(vm);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">if</span> ( vm.count(<span class="stringliteral">&quot;help&quot;</span> ) ) { std::cout &lt;&lt; desc &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>; <span class="keywordflow">return</span> EXIT_FAILURE; }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">if</span> ( vm.count(<span class="stringliteral">&quot;gt&quot;</span>   ) )   std::cout &lt;&lt; <span class="stringliteral">&quot;gt: &quot;</span>    &lt;&lt; gt_name    &lt;&lt; std::endl;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">if</span> ( vm.count(<span class="stringliteral">&quot;noise&quot;</span>) )   std::cout &lt;&lt; <span class="stringliteral">&quot;noise: &quot;</span> &lt;&lt; gt_noise &lt;&lt; std::endl;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        show_clusters = vm.count(<span class="stringliteral">&quot;show-clusters&quot;</span>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        gt_3D         = vm.count(<span class="stringliteral">&quot;3D&quot;</span>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#if USE_PEARL</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="preprocessor"></span>        <span class="keywordflow">if</span> ( vm.count(<span class="stringliteral">&quot;nodebug&quot;</span>) )</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            pearl_params.debug = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;#endif</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    srand( seed );</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">// METHOD</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span> ( vm.count(<span class="stringliteral">&quot;method&quot;</span>) )</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        std::transform( method_name.begin(), method_name.end(), method_name.begin(), ::tolower );</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">if</span>      ( !(method_name.compare(<span class="stringliteral">&quot;pearl&quot;</span>)) )    <a class="code" href="main_8cpp.html#af1b37534bc363a9d22a3ad80ef5d1e0a">method</a> = <a class="code" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2fa81b0b1e697751b616662662702da52ef">PEARL_METHOD</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !(method_name.compare(<span class="stringliteral">&quot;gf2&quot;</span>  )) )    <a class="code" href="main_8cpp.html#af1b37534bc363a9d22a3ad80ef5d1e0a">method</a> = <a class="code" href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2face89cb6e0896990e7dc31a5a98c99ec6">GF2_METHOD</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="keywordflow">else</span>                                           { std::cerr &lt;&lt; <span class="stringliteral">&quot;unknown method...&quot;</span> &lt;&lt; method_name &lt;&lt; <span class="stringliteral">&quot;...exiting&quot;</span> &lt;&lt; std::endl; <span class="keywordflow">return</span> EXIT_FAILURE; }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">// GT</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    cv::Mat                       img;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    pcl::PointCloud&lt;MyPoint&gt;::Ptr <a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    vector&lt;LinePrimitive&gt;         *p_lines = NULL;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordtype">int</span>                           desiredK;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    vector&lt;float&gt;                 angles;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">if</span> ( vm.count(<span class="stringliteral">&quot;gt&quot;</span>) )</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        p_lines = <span class="keyword">new</span> std::vector&lt;LinePrimitive&gt;();</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">if</span>      (   !gt_name.compare(<span class="stringliteral">&quot;pearl0&quot;</span>)     ) { <a class="code" href="namespace_g_f2.html#a3a7f17ac2e3b3d26ae83112e0430a9b3">gtPearl</a>( img, *p_lines, gt_spacing, gt_nLines, gt_scene_size ); }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (   !gt_name.compare(<span class="stringliteral">&quot;stairs&quot;</span>)     ) { <a class="code" href="namespace_g_f2.html#a67b8fd26562db641ec0ffc608ed953c9">gtStairs</a>( img, *p_lines, gt_nLines, gt_spacing, gt_decay, gt_scene_size ); } <span class="comment">// --method gf2 --gt stairs --gt-nlines 6 --gt-spacing 4 --gt-decay 0.15 --nrects 2 --nangles 2 --noise 0.01 --datacost 0.1 --pwcost 0.6 --npoints 400 --nthreads 8 --sample_k 1.2 --thread_depth 500 --sample_scale 1.5 --nodebug</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (   !gt_name.compare(<span class="stringliteral">&quot;stratified&quot;</span>) ) { <a class="code" href="namespace_g_f2.html#a31b2ccb50411466f83b5e66363010890">gtImg_stratified</a>( img, *p_lines, angles, gt_nRects, gt_nAngles, gt_scene_size ); }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="comment">// OLD</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (   !gt_name.compare(<span class="stringliteral">&quot;2rects&quot;</span>)     ) { <a class="code" href="namespace_g_f2.html#a2f83d0a1af2279c70a4bc44bb85adedc">gtImg</a>( img, *p_lines, NULL ); }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (   !gt_name.compare(<span class="stringliteral">&quot;2rects2&quot;</span>)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                 || !gt_name.compare(<span class="stringliteral">&quot;2rects3&quot;</span>)    )</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            vector&lt;float&gt; tmp_angles = {0.f,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                                        vm.count(<span class="stringliteral">&quot;2rect_angle&quot;</span>) ? vm[<span class="stringliteral">&quot;2rect_angle&quot;</span>].as&lt;<span class="keywordtype">float</span>&gt;()</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                                                : 40.f };</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            vector&lt;cv::Point2i&gt; <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a> =</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                cv::Point2i(20 ,20), cv::Point2i(150,220),</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                cv::Point2i(190,40), cv::Point2i(240,240),</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            };</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <a class="code" href="namespace_g_f2.html#a2f83d0a1af2279c70a4bc44bb85adedc">gtImg</a>( img, *p_lines, &amp;tmp_angles, gt_name.compare(<span class="stringliteral">&quot;2rects3&quot;</span>) ? NULL : &amp;<a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a> );</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !gt_name.compare(<span class="stringliteral">&quot;2rects&quot;</span>)     ) { <a class="code" href="namespace_g_f2.html#acd0f9a26aa6f45f0cf66886188b028b1">gtImg2</a>( img, *p_lines, gt_nRects ); }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">else</span>                                       { std::cerr &lt;&lt; <span class="stringliteral">&quot;unrecognized GT type...&quot;</span> &lt;&lt; gt_name &lt;&lt; <span class="stringliteral">&quot;...exiting\n&quot;</span>; <span class="keywordflow">return</span> EXIT_FAILURE; }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">if</span> ( gt_clutter_lines )</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <a class="code" href="namespace_g_f2.html#a2a07e318e2257e851709b18a96227c17">gtRandomLines</a>( img, *p_lines, gt_clutter_lines, gt_scene_size );</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            cv::imshow( <span class="stringliteral">&quot;img&quot;</span>, img );</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            cv::waitKey( 100 );</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">if</span> ( vm.count(<span class="stringliteral">&quot;gt-only&quot;</span>) )</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            cv::waitKey();</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="comment">// count GT k</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        desiredK = p_lines-&gt;size();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        cv::imwrite( <span class="stringliteral">&quot;input.png&quot;</span>, img );</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">// IMAGE -&gt; CLOUD</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> ( !cloud )</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">if</span> ( vm.count(<span class="stringliteral">&quot;input-cloud&quot;</span>) )</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            cloud.reset( <span class="keyword">new</span> MyCloud() );</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            std::string <a class="code" href="function__handle_8m.html#a03d2a3685385f82943527be28e035ad9">path</a>( vm[<span class="stringliteral">&quot;input-cloud&quot;</span>].as&lt;string&gt;() );</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordflow">if</span> ( !boost::filesystem::exists( path ) )</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                std::cerr &lt;&lt; <span class="stringliteral">&quot;input-cloud: &quot;</span> &lt;&lt; path &lt;&lt; <span class="stringliteral">&quot; doest not exist!!! exiting...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;loading &quot;</span> &lt;&lt; path &lt;&lt; std::endl;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <span class="keywordflow">if</span> ( path.find(<span class="stringliteral">&quot;pcd&quot;</span>) != std::string::npos )</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                pcl::io::loadPCDFile( path, *cloud );</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( path.find(<span class="stringliteral">&quot;ply&quot;</span>) != std::string::npos )</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                <span class="keywordtype">bool</span> success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                    pcl::io::loadPLYFile( path, *cloud );</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                    success = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                <span class="keywordflow">catch</span> (std::exception <span class="keyword">const</span>&amp; e)</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                    success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                <span class="keywordflow">if</span> ( !success )</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                    std::cout &lt;&lt; <span class="stringliteral">&quot;attempting mesh...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                    pcl::PolygonMesh testMesh;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                    pcl::io::loadPLYFile( path, testMesh );</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                    std::cout &lt;&lt; <span class="stringliteral">&quot;mesh loaded, &quot;</span> &lt;&lt; testMesh.cloud.width &lt;&lt; <span class="stringliteral">&quot; points&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( path.find(<span class="stringliteral">&quot;obj&quot;</span>) != std::string::npos )</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                pcl::io::loadOBJFile( path, *cloud );</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;            }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                std::cerr &lt;&lt; <span class="stringliteral">&quot;unrecognized cloud extension: &quot;</span> &lt;&lt; path &lt;&lt; std::endl;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;loaded: &quot;</span> &lt;&lt; cloud-&gt;size() &lt;&lt; <span class="stringliteral">&quot; points&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="keywordflow">if</span> ( !cloud-&gt;size() ) <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            pcl::visualization::PCLVisualizer::Ptr vptr( <span class="keyword">new</span> pcl::visualization::PCLVisualizer() );</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                vptr-&gt;setBackgroundColor( .5, .5, .6 );</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                vptr-&gt;addPointCloud( cloud );</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                vptr-&gt;spinOnce();</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">if</span> ( cloud-&gt;size() != <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(gt_nPoints) )</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;cloud-&gt;size() != gt_nPoints...\n&quot;</span>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="comment">// subsample cloud</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                <span class="keywordflow">if</span> ( cloud-&gt;size() &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(gt_nPoints) )</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                    MyCloud::Ptr tmp_cloud( <span class="keyword">new</span> MyCloud() ); tmp_cloud-&gt;reserve( gt_nPoints + 10 );</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                    <span class="keywordtype">float</span> prob = gt_nPoints / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>( cloud-&gt;size() );</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != cloud-&gt;size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                    {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                        <span class="keywordflow">if</span> ( (rand()/static_cast&lt;float&gt;(RAND_MAX)) &gt; prob ) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                        tmp_cloud-&gt;push_back( cloud-&gt;at(<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>) );</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                    }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                    cloud = tmp_cloud;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                <span class="comment">// resize cloud</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    MyPoint min_pt, max_pt;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                    pcl::getMinMax3D( *cloud, min_pt, max_pt );</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">float</span> rescale = (max_pt.getVector3fMap() - min_pt.getVector3fMap()).norm() / gt_scene_size;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != cloud-&gt;size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                        cloud-&gt;at( <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> ).x = (cloud-&gt;at(<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>).x - min_pt.x) / rescale;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                        cloud-&gt;at( <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> ).y = (cloud-&gt;at(<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>).y - min_pt.y) / rescale;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                        cloud-&gt;at( <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> ).z = (cloud-&gt;at(<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>).z - min_pt.z) / rescale;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                    }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                    pcl::visualization::PCLVisualizer::Ptr vptr1( <span class="keyword">new</span> pcl::visualization::PCLVisualizer() );</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                    vptr1-&gt;setBackgroundColor( .5, .5, .6 );</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                    vptr1-&gt;addPointCloud( cloud );</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    vptr1-&gt;addSphere( cloud-&gt;at(cloud-&gt;size()/2), gf2_scale, <span class="stringliteral">&quot;scale_sphere&quot;</span>, 0 );</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    vptr1-&gt;setShapeRenderingProperties( pcl::visualization::PCL_VISUALIZER_OPACITY, .5, <span class="stringliteral">&quot;scale_sphere&quot;</span> );</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                    vptr1-&gt;spinOnce(5000);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                }</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                <span class="comment">//return EXIT_FAILURE;</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            }</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <span class="keywordflow">if</span> ( vm.count(<span class="stringliteral">&quot;K&quot;</span>) )</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                desiredK = vm[<span class="stringliteral">&quot;K&quot;</span>].as&lt;int&gt;();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordflow">if</span> ( img.empty() )</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                std::cerr &lt;&lt; <span class="stringliteral">&quot;image input disables...I need gt lines provided...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> n_points = gt_3D ? pow(gt_nPoints,1/3.) : gt_nPoints;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;            GlobFit2::image_2_2DCloud( <span class="comment">/*  out_cloud: */</span> cloud</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                                       , <span class="comment">/*     path: */</span> img</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                                       , <span class="comment">/* N_points: */</span> (gt_3D ? n_points * n_points : n_points)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                                       , <span class="comment">/*        Z: */</span> Z</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                                       , <span class="comment">/* scene scale: */</span> gt_scene_size );</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="keywordflow">if</span> ( gt_3D )</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                pcl::PointCloud&lt;MyPoint&gt;::Ptr cloud2( <span class="keyword">new</span> pcl::PointCloud&lt;MyPoint&gt;() );</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != cloud-&gt;size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                    <span class="keywordtype">int</span> points_new = 0;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                    <span class="keywordflow">while</span> ( points_new &lt; n_points )</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                    {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                        cloud2-&gt;push_back( cloud-&gt;at(<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>) );</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                        <span class="keywordtype">float</span> uniform = (rand()/<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(RAND_MAX));</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                        <span class="comment">// inv_cdf(x^2): x = (3*uniform)^(1/3); a^(1/3) = exp(log(a)/3);</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                        cloud2-&gt;back().z = Z + exp(log(3.f*uniform)/3.f) * gt_scene_size;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                        ++points_new;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                    }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                pcl::copyPointCloud( *cloud2, *cloud );</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            Eigen::Vector3f sensor_origin( .0f, .0f, .0f );</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            smartgeometry::addGaussianNoise&lt;MyPoint&gt;( <a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                                                      , NULL</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                                                      , { gt_noise, gt_noise, gt_3D ? gt_noise : 0.f }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                                      , Eigen::Vector3f::Zero()</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                                                      , &amp;sensor_origin );</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">// load lines?</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> ( vm.count(<span class="stringliteral">&quot;input-lines&quot;</span>) )</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="preprocessor">#if USE_PEARL</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="preprocessor"></span>    pearl_params.max_neighbourhood_radius = gf2_scale;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="preprocessor"></span>    std::cout &lt;&lt; <span class="stringliteral">&quot;entering &quot;</span> &lt;&lt; std::endl; fflush(stdout);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">if</span> ( gt_3D )</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        solve&lt;PlanePrimitive&gt;( <a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                               , gf2_scale</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                               , gf2_desired_angles</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                               , *p_lines</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                               , show_clusters</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                               , desiredK</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                               , lambdas</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                               , gf2_nThreads</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                               , gf2_thread_depth</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                               , gf2_trunc_pw_angle_at</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                               , <a class="code" href="main_8cpp.html#af1b37534bc363a9d22a3ad80ef5d1e0a">method</a></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                               , gf2_k_explore_ratio</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                               , gf2_filter_coeff</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                               , gf2_angle_similarity</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                               , gf2_add_n_friends</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                               , argc</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                               , argv</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                               , &amp;pearl_params );</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        solve&lt;LinePrimitive&gt;( <a class="code" href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                              , gf2_scale</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                              , gf2_desired_angles</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                              , *p_lines</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                              , show_clusters</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                              , desiredK</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                              , lambdas</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                              , gf2_nThreads</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                              , gf2_thread_depth</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                              , gf2_trunc_pw_angle_at</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                              , <a class="code" href="main_8cpp.html#af1b37534bc363a9d22a3ad80ef5d1e0a">method</a></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                              , gf2_k_explore_ratio</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                              , gf2_filter_coeff</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                              , gf2_angle_similarity</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                              , gf2_add_n_friends</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                              , argc</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                              , argv</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                              , &amp;pearl_params );</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    SAFE_DELETE( p_lines );</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;}</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="preprocessor">#if USE_CUDA</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &quot;gf2cuda/gf2Cuda.h&quot;</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="preprocessor">#include &quot;my_cuda_util/myCudaUtil.h&quot;</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="keywordtype">int</span> <a class="code" href="main_8cpp.html#a7180da18e08cbcc0e9d122b0f6c45705">testCuda</a>()</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;{</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    std::vector&lt;float&gt; test_series;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordtype">int</span> limit = 1;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> s = 0; s != 13; ++s )</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        test_series.clear();</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> <a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a> = 0; <a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a> &lt; limit; ++<a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a> )</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            test_series.push_back( rand() % 2 );</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;testing &quot;</span> &lt;&lt; test_series.size() &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        smartgeometry::cuda_util::testReduce( test_series );</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordflow">if</span> ( limit == 1 ) limit = 2;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">else</span> limit *= 10;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;}</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="preprocessor">#endif // USE_CUDA</span></div>
<div class="ttc" id="my__ply__read_8m_html_ab6eb9cb199df2a09b72fbc4375c0c335"><div class="ttname"><a href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a></div><div class="ttdeci">pid</div><div class="ttdef"><b>Definition:</b> <a href="my__ply__read_8m_source.html#l00011">my_ply_read.m:11</a></div></div>
<div class="ttc" id="plane_primitive_8h_html"><div class="ttname"><a href="plane_primitive_8h.html">planePrimitive.h</a></div></div>
<div class="ttc" id="pcd__viewer_2main_8cpp_html_aa774a711da49de54387dd20fddb3d1e9"><div class="ttname"><a href="pcd__viewer_2main_8cpp.html#aa774a711da49de54387dd20fddb3d1e9">visualize</a></div><div class="ttdeci">int visualize(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="pcd__viewer_2main_8cpp_source.html#l00162">main.cpp:162</a></div></div>
<div class="ttc" id="fmincon__merged_8m_html_ab0415214b5aa9d19959027ba5fe55292"><div class="ttname"><a href="fmincon__merged_8m.html#ab0415214b5aa9d19959027ba5fe55292">run</a></div><div class="ttdeci">run([p filesep 'starting_values.m'])%match normals perp_cnt=0</div></div>
<div class="ttc" id="main_8cpp_html_a1e698d8a6ececaba8a2d0156a06188ae"><div class="ttname"><a href="main_8cpp.html#a1e698d8a6ececaba8a2d0156a06188ae">sanityCheck</a></div><div class="ttdeci">int sanityCheck(PrimitivesT const &amp;gt_lines, PrimitivesT const &amp;lines, am::MaskType const &amp;opt_mask, PointsPtrT cloud, Eigen::Matrix&lt; Scalar,-1, 1 &gt; const &amp;lambdas, Scalar const gf2_scale, std::vector&lt; Scalar &gt; const &amp;desired_angles, Scalar const trunc_pw_angle_at)</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00041">main.cpp:41</a></div></div>
<div class="ttc" id="k_means_8h_html"><div class="ttname"><a href="k_means_8h.html">kMeans.h</a></div></div>
<div class="ttc" id="globfit_8m_html_a901eed5bfcfb9d1af7f58c545d1a88c4"><div class="ttname"><a href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="globfit_8m_source.html#l00015">globfit.m:15</a></div></div>
<div class="ttc" id="main_8cpp_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="main_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00404">main.cpp:404</a></div></div>
<div class="ttc" id="main_8cpp_html_a7180da18e08cbcc0e9d122b0f6c45705"><div class="ttname"><a href="main_8cpp.html#a7180da18e08cbcc0e9d122b0f6c45705">testCuda</a></div><div class="ttdeci">int testCuda()</div></div>
<div class="ttc" id="main_8cpp_html_a8a987f690eac0c71f97f2b502e27d651"><div class="ttname"><a href="main_8cpp.html#a8a987f690eac0c71f97f2b502e27d651">autodiff_main</a></div><div class="ttdeci">int autodiff_main()</div><div class="ttdef"><b>Definition:</b> <a href="autodiff_8cpp_source.html#l00155">autodiff.cpp:155</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1util_html_ac0845eadda4c0f7995e5511792682cd0"><div class="ttname"><a href="namespace_g_f2_1_1util.html#ac0845eadda4c0f7995e5511792682cd0">GF2::util::timestamp2Str</a></div><div class="ttdeci">std::string timestamp2Str()</div><div class="ttdef"><b>Definition:</b> <a href="util_8hpp_source.html#l00119">util.hpp:119</a></div></div>
<div class="ttc" id="lp_8m_html_a629c932e04d057de3f60912da6e565c2"><div class="ttname"><a href="lp_8m.html#a629c932e04d057de3f60912da6e565c2">cloud</a></div><div class="ttdeci">cloud[Px, Py, Pz,~]</div><div class="ttdef"><b>Definition:</b> <a href="lp_8m_source.html#l00014">lp.m:14</a></div></div>
<div class="ttc" id="io_8h_html"><div class="ttname"><a href="io_8h.html">io.h</a></div></div>
<div class="ttc" id="main_8cpp_html_a5ae9eabe195b770f0011d095f1a9f544"><div class="ttname"><a href="main_8cpp.html#a5ae9eabe195b770f0011d095f1a9f544">gt_primitives_from_lines</a></div><div class="ttdeci">std::vector&lt; PrimitiveT &gt; gt_primitives_from_lines(std::vector&lt; LinePrimitive &gt; const &amp;gt_lines)</div><div class="ttdoc">SOLVE ///. </div></div>
<div class="ttc" id="glob_fit2_8h_html"><div class="ttname"><a href="glob_fit2_8h.html">globFit2.h</a></div></div>
<div class="ttc" id="optimization_8h_html"><div class="ttname"><a href="optimization_8h.html">optimization.h</a></div></div>
<div class="ttc" id="main_8cpp_html_a634f80b6ca0deecea4521100c8baf2dd"><div class="ttname"><a href="main_8cpp.html#a634f80b6ca0deecea4521100c8baf2dd">gt_primitives_from_lines&lt; PlanePrimitive &gt;</a></div><div class="ttdeci">std::vector&lt; PlanePrimitive &gt; gt_primitives_from_lines&lt; PlanePrimitive &gt;(std::vector&lt; LinePrimitive &gt; const &amp;gt_lines)</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00087">main.cpp:87</a></div></div>
<div class="ttc" id="main_8cpp_html_a0ef01500d2c586bdaccb823536ebfc2f"><div class="ttname"><a href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2f">METHOD_TYPE</a></div><div class="ttdeci">METHOD_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00034">main.cpp:34</a></div></div>
<div class="ttc" id="globfit_8m_html_ad71b2f1a5c693953c99f125619837e0c"><div class="ttname"><a href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a></div><div class="ttdeci">for lid</div><div class="ttdef"><b>Definition:</b> <a href="globfit_8m_source.html#l00029">globfit.m:29</a></div></div>
<div class="ttc" id="namespace_g_f2_html_a31b2ccb50411466f83b5e66363010890"><div class="ttname"><a href="namespace_g_f2.html#a31b2ccb50411466f83b5e66363010890">GF2::gtImg_stratified</a></div><div class="ttdeci">int gtImg_stratified(cv::Mat &amp;img, std::vector&lt; LinePrimitive &gt; &amp;lines, std::vector&lt; float &gt; &amp;angles, int n_rects, int n_angles, float scale)</div><div class="ttdef"><b>Definition:</b> <a href="ground__truth_8cpp_source.html#l00350">ground_truth.cpp:350</a></div></div>
<div class="ttc" id="class_g_f2_1_1_line_primitive_html_ab0227ccf683b47844df88e0b4932520b"><div class="ttname"><a href="class_g_f2_1_1_line_primitive.html#ab0227ccf683b47844df88e0b4932520b">GF2::LinePrimitive::dir</a></div><div class="ttdeci">virtual Eigen::Matrix&lt; Scalar, 3, 1 &gt; dir() const </div><div class="ttdoc">Compulsory virtual overload of orientation getter. The orientation of the line is the direction store...</div><div class="ttdef"><b>Definition:</b> <a href="line_primitive_8h_source.html#l00063">linePrimitive.h:63</a></div></div>
<div class="ttc" id="class_g_f2_1_1_line_primitive_html"><div class="ttname"><a href="class_g_f2_1_1_line_primitive.html">GF2::LinePrimitive</a></div><div class="ttdoc">Class to wrap a line with. Implements pos() and dir() functions, and a constructor taking a position ...</div><div class="ttdef"><b>Definition:</b> <a href="line_primitive_8h_source.html#l00023">linePrimitive.h:23</a></div></div>
<div class="ttc" id="globfit_8m_html_ab9a89211ecb71d18bbd259853fda1c54"><div class="ttname"><a href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div><div class="ttdeci">points</div><div class="ttdef"><b>Definition:</b> <a href="globfit_8m_source.html#l00007">globfit.m:7</a></div></div>
<div class="ttc" id="namespace_g_f2_html_a2f83d0a1af2279c70a4bc44bb85adedc"><div class="ttname"><a href="namespace_g_f2.html#a2f83d0a1af2279c70a4bc44bb85adedc">GF2::gtImg</a></div><div class="ttdeci">int gtImg(cv::Mat &amp;img, std::vector&lt; LinePrimitive &gt; &amp;lines, std::vector&lt; float &gt; const *angles=NULL, std::vector&lt; cv::Point2i &gt; const *points_arg=NULL)</div><div class="ttdoc">gtImg Two perpendicular rectangles rotated. </div><div class="ttdef"><b>Definition:</b> <a href="ground__truth_8cpp_source.html#l00132">ground_truth.cpp:132</a></div></div>
<div class="ttc" id="namespace_g_f2_html_a2a07e318e2257e851709b18a96227c17"><div class="ttname"><a href="namespace_g_f2.html#a2a07e318e2257e851709b18a96227c17">GF2::gtRandomLines</a></div><div class="ttdeci">int gtRandomLines(cv::Mat &amp;img, std::vector&lt; LinePrimitive &gt; &amp;lines, int count, float scale, float min_angle=0.f, float max_angle=M_PI)</div><div class="ttdef"><b>Definition:</b> <a href="ground__truth_8cpp_source.html#l00162">ground_truth.cpp:162</a></div></div>
<div class="ttc" id="get__line_8m_html_a4fa05b1f00fcde100685cc887554b93b"><div class="ttname"><a href="get__line_8m.html#a4fa05b1f00fcde100685cc887554b93b">line</a></div><div class="ttdeci">line</div><div class="ttdef"><b>Definition:</b> <a href="get__line_8m_source.html#l00003">get_line.m:3</a></div></div>
<div class="ttc" id="test0_8m_html_a5d402d6989f84833aaf30ee093d25eb6"><div class="ttname"><a href="test0_8m.html#a5d402d6989f84833aaf30ee093d25eb6">display</a></div><div class="ttdeci">else display('Hmm, something went wrong!')</div></div>
<div class="ttc" id="globfit_8m_html_a59cd6a1194eac609179091dc9dcc724b"><div class="ttname"><a href="globfit_8m.html#a59cd6a1194eac609179091dc9dcc724b">Dim</a></div><div class="ttdeci">read primitives Dim</div><div class="ttdef"><b>Definition:</b> <a href="globfit_8m_source.html#l00011">globfit.m:11</a></div></div>
<div class="ttc" id="class_g_f2_1_1_primitive_html"><div class="ttname"><a href="class_g_f2_1_1_primitive.html">GF2::Primitive</a></div><div class="ttdoc">Primitive wrapper base class. Requires implementation of pos() and dir() functions. It&#39;s also good to implement constructor from default input (i.e. from point and normal for planes) </div><div class="ttdef"><b>Definition:</b> <a href="globfit2_2primitives_2primitive_8h_source.html#l00016">primitive.h:16</a></div></div>
<div class="ttc" id="main_8cpp_html_a0ef01500d2c586bdaccb823536ebfc2face89cb6e0896990e7dc31a5a98c99ec6"><div class="ttname"><a href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2face89cb6e0896990e7dc31a5a98c99ec6">GF2_METHOD</a></div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00034">main.cpp:34</a></div></div>
<div class="ttc" id="cuboid_ransac_8h_html"><div class="ttname"><a href="cuboid_ransac_8h.html">cuboidRansac.h</a></div></div>
<div class="ttc" id="class_g_f2_1_1_line_primitive_html_ab90bbdb79ebafc962105dce3cbf075d8"><div class="ttname"><a href="class_g_f2_1_1_line_primitive.html#ab90bbdb79ebafc962105dce3cbf075d8">GF2::LinePrimitive::pos</a></div><div class="ttdeci">virtual Eigen::Matrix&lt; Scalar, 3, 1 &gt; pos() const </div><div class="ttdoc">Compulsory virtual overload of position getter. The position of the line is the location stored at th...</div><div class="ttdef"><b>Definition:</b> <a href="line_primitive_8h_source.html#l00060">linePrimitive.h:60</a></div></div>
<div class="ttc" id="hough_line_8h_html"><div class="ttname"><a href="hough_line_8h.html">houghLine.h</a></div></div>
<div class="ttc" id="main_8cpp_html_a0ef01500d2c586bdaccb823536ebfc2fa81b0b1e697751b616662662702da52ef"><div class="ttname"><a href="main_8cpp.html#a0ef01500d2c586bdaccb823536ebfc2fa81b0b1e697751b616662662702da52ef">PEARL_METHOD</a></div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00034">main.cpp:34</a></div></div>
<div class="ttc" id="fmincon__merged_8m_html_a4ca269cf93df1b512b52174c1a256fe5"><div class="ttname"><a href="fmincon__merged_8m.html#a4ca269cf93df1b512b52174c1a256fe5">dir</a></div><div class="ttdeci">dir</div><div class="ttdef"><b>Definition:</b> <a href="fmincon__merged_8m_source.html#l00141">fmincon_merged.m:141</a></div></div>
<div class="ttc" id="namespace_g_f2_html_a67b8fd26562db641ec0ffc608ed953c9"><div class="ttname"><a href="namespace_g_f2.html#a67b8fd26562db641ec0ffc608ed953c9">GF2::gtStairs</a></div><div class="ttdeci">int gtStairs(cv::Mat &amp;img, std::vector&lt; LinePrimitive &gt; &amp;lines, int steps=4, float line_width_percentage_of_column=1.4f, float decay=.1f, float scale=1.f)</div></div>
<div class="ttc" id="ground__truth_8h_html"><div class="ttname"><a href="ground__truth_8h.html">ground_truth.h</a></div></div>
<div class="ttc" id="local_analysis_8h_html"><div class="ttname"><a href="local_analysis_8h.html">localAnalysis.h</a></div></div>
<div class="ttc" id="_c_v_tools_8h_html"><div class="ttname"><a href="_c_v_tools_8h.html">CVTools.h</a></div></div>
<div class="ttc" id="read__ply_8m_html_ac3bb6f719742fd1e5768d6d1361cfb49"><div class="ttname"><a href="read__ply_8m.html#ac3bb6f719742fd1e5768d6d1361cfb49">vi</a></div><div class="ttdeci">vi</div><div class="ttdef"><b>Definition:</b> <a href="read__ply_8m_source.html#l00016">read_ply.m:16</a></div></div>
<div class="ttc" id="namespaceam_html_a06dbc09d269453511f8b4349f693890c"><div class="ttname"><a href="namespaceam.html#a06dbc09d269453511f8b4349f693890c">am::MaskType</a></div><div class="ttdeci">std::vector&lt; int &gt; MaskType</div><div class="ttdef"><b>Definition:</b> <a href="my__types_8h_source.html#l00020">my_types.h:20</a></div></div>
<div class="ttc" id="main_8cpp_html_a89b2610b21ce55fd07b0bd9661ce9174"><div class="ttname"><a href="main_8cpp.html#a89b2610b21ce55fd07b0bd9661ce9174">gt_primitives_from_lines&lt; LinePrimitive &gt;</a></div><div class="ttdeci">std::vector&lt; LinePrimitive &gt; gt_primitives_from_lines&lt; LinePrimitive &gt;(std::vector&lt; LinePrimitive &gt; const &amp;gt_lines)</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00082">main.cpp:82</a></div></div>
<div class="ttc" id="main_8cpp_html_a2e2baf265c4171b4472823d96c374a99"><div class="ttname"><a href="main_8cpp.html#a2e2baf265c4171b4472823d96c374a99">solve</a></div><div class="ttdeci">int solve(PointsPtrT cloud, Scalar const working_scale, std::vector&lt; Scalar &gt; const &amp;gf2_desired_angles, std::vector&lt; LinePrimitive &gt; const &amp;gt_lines, bool const show_clusters, int const desiredK, Eigen::Matrix&lt; float,-1, 1 &gt; const lambdas, int const gf2_nThreads, int const gf2_thread_depth, Scalar const gf2_trunc_pw_angle_at, METHOD_TYPE const method, float const gf2_k_explore_ratio, float const gf2_filter_coeff, float const gf2_angle_similarity, int const gf2_add_n_friends, int const argc, char **const argv)</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00103">main.cpp:103</a></div></div>
<div class="ttc" id="main_8cpp_html_af1b37534bc363a9d22a3ad80ef5d1e0a"><div class="ttname"><a href="main_8cpp.html#af1b37534bc363a9d22a3ad80ef5d1e0a">method</a></div><div class="ttdeci">enum METHOD_TYPE method</div></div>
<div class="ttc" id="namespace_g_f2_html_a3a7f17ac2e3b3d26ae83112e0430a9b3"><div class="ttname"><a href="namespace_g_f2.html#a3a7f17ac2e3b3d26ae83112e0430a9b3">GF2::gtPearl</a></div><div class="ttdeci">int gtPearl(cv::Mat &amp;img, std::vector&lt; LinePrimitive &gt; &amp;lines, float spacing, int n_lines, float const scale=1.f)</div><div class="ttdef"><b>Definition:</b> <a href="ground__truth_8cpp_source.html#l00185">ground_truth.cpp:185</a></div></div>
<div class="ttc" id="namespace_g_f2_html_acd0f9a26aa6f45f0cf66886188b028b1"><div class="ttname"><a href="namespace_g_f2.html#acd0f9a26aa6f45f0cf66886188b028b1">GF2::gtImg2</a></div><div class="ttdeci">int gtImg2(cv::Mat &amp;img, std::vector&lt; LinePrimitive &gt; &amp;lines, int rectCount)</div><div class="ttdoc">gtImg2 Many rectangles rotated arbitrarily. </div><div class="ttdef"><b>Definition:</b> <a href="ground__truth_8cpp_source.html#l00266">ground_truth.cpp:266</a></div></div>
<div class="ttc" id="function__handle_8m_html_a03d2a3685385f82943527be28e035ad9"><div class="ttname"><a href="function__handle_8m.html#a03d2a3685385f82943527be28e035ad9">path</a></div><div class="ttdeci">function it is only possible to succesfully evaluate the resulting handle when the function the handle refers to was on the MATLAB search at the time the handle was created To create valid handles to arbitrarty functions possibly not on the search path</div><div class="ttdef"><b>Definition:</b> <a href="function__handle_8m_source.html#l00001">function_handle.m:1</a></div></div>
<div class="ttc" id="class_g_f2_1_1_plane_primitive_html"><div class="ttname"><a href="class_g_f2_1_1_plane_primitive.html">GF2::PlanePrimitive</a></div><div class="ttdoc">Class to wrap a plane with. Implements pos() and dir() functions, and a constructor taking a position...</div><div class="ttdef"><b>Definition:</b> <a href="plane_primitive_8h_source.html#l00020">planePrimitive.h:20</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 2 2014 14:33:23 for globOpt by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
