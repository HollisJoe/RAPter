<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>globOpt: include/globfit2/optimization/impl/problemSetup.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">globOpt
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e01fc40d2b7505b29a2defa0d6c40691.html">include</a></li><li class="navelem"><a class="el" href="dir_a06271ff063861600d6d08430c32feea.html">globfit2</a></li><li class="navelem"><a class="el" href="dir_763fb2c265f38c1017b67df34d2ee3ec.html">optimization</a></li><li class="navelem"><a class="el" href="dir_11ec1105867bd10ed267fa05876e7dc9.html">impl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">problemSetup.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="problem_setup_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef GF2_PROBLEMSETUP_HPP</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define GF2_PROBLEMSETUP_HPP</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span>                               <span class="comment">// cout, cerr, endl</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;Eigen/Dense&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="problem_setup_8h.html">globfit2/optimization/problemSetup.h</a>&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="energy_functors_8h.html">globfit2/optimization/energyFunctors.h</a>&quot;</span> <span class="comment">// AbstractPrimitivePrimitiveEnergyFunctor,</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;qcqpcpp/optProblem.h&quot;</span>                   <span class="comment">// OptProblem</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="parameters_8h.html">globfit2/parameters.h</a>&quot;</span>                  <span class="comment">// ProblemSetupParams</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">namespace </span>GF2 {</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//____________________________________________class ProblemSetup __________________________________________________</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">template</span> &lt; <span class="keyword">class </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;         , <span class="keyword">class </span>_PointContainerT</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;         , <span class="keyword">class </span>_PrimitiveT</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;         , <span class="keyword">class </span>_PointPrimitiveT</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;         &gt; <span class="keywordtype">int</span></div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="class_g_f2_1_1_problem_setup.html#aefb4febca1521ab72e3133b77626c6de">   20</a></span>&#160;<a class="code" href="class_g_f2_1_1_problem_setup.html#aefb4febca1521ab72e3133b77626c6de">ProblemSetup::formulateCli</a>( <span class="keywordtype">int</span>    argc</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                          , <span class="keywordtype">char</span>** argv )</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;{</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="keywordtype">bool</span> verbose = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="keyword">typedef</span>          <a class="code" href="struct_g_f2_1_1_my_point_primitive_distance_functor.html">MyPointPrimitiveDistanceFunctor</a>               _PointPrimitiveDistanceFunctor;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keyword">typedef</span> <span class="keyword">typename</span> _PointPrimitiveT::Scalar                      Scalar;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="struct_g_f2_1_1_problem_setup_params.html">ProblemSetupParams&lt;Scalar&gt;</a> params;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">//Scalar                    scale            = 0.05f;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    std::string               cloud_path       = <span class="stringliteral">&quot;cloud.ply&quot;</span>,</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                              candidates_path  = <span class="stringliteral">&quot;candidates.txt&quot;</span>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="comment">//std::vector&lt;Scalar&gt;       angles           = {0, M_PI_2, M_PI };   // TODO: param</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#aea20a9c94d97aedba5d88717f6ed9c55">angles</a> = {0, M_PI_2, M_PI };</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">//Eigen::Matrix&lt;Scalar,3,1&gt; weights;           weights &lt;&lt; 1, 5, 1;   // --unary 1 --pw 5 --cmplx 1</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordtype">int</span>                       srand_val        = 123456;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    std::string               cost_string      = <span class="stringliteral">&quot;sqrt&quot;</span>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    std::string               problem_rel_path = <span class="stringliteral">&quot;problem&quot;</span>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    std::string               data_cost_mode_str = <span class="stringliteral">&quot;assoc&quot;</span>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">//DATA_COST_MODE data_cost_mode = ASSOC_BASED;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    std::string               constr_mode_str = <span class="stringliteral">&quot;hybrid&quot;</span>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">//CONSTR_MODE constr_mode = PATCH_WISE;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">//int                       patch_pop_limit = 10;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// parse params</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="keywordtype">bool</span> valid_input = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        valid_input &amp;= pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--scale&quot;</span>     , params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a3ee3f11fe8d9dc44b56057c65fe92ef5">scale</a>   ) &gt;= 0;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="comment">// cloud</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--cloud&quot;</span>     , cloud_path     );</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        valid_input &amp;= boost::filesystem::exists( cloud_path );</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        valid_input &amp;= pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--candidates&quot;</span>, candidates_path) &gt;= 0;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--unary&quot;</span>, params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a7069a872d02c3d98c2589b4f4ba7e3a2">weights</a>(0) );</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--pw&quot;</span>   , params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a7069a872d02c3d98c2589b4f4ba7e3a2">weights</a>(1) );</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--cmp&quot;</span>  , params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a7069a872d02c3d98c2589b4f4ba7e3a2">weights</a>(2) );</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--cost-fn&quot;</span>, cost_string );</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--srand&quot;</span>, srand_val );</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--rod&quot;</span>  , problem_rel_path );</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="comment">// data_cost_mode</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--data-mode&quot;</span>, data_cost_mode_str );</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;             <span class="keywordflow">if</span> ( !data_cost_mode_str.compare( <span class="stringliteral">&quot;assoc&quot;</span>   ) ) params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a41a53f7c47c539688a7e2380ac4356ae">data_cost_mode</a> = <a class="code" href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205a12a8aeff7c65ddca3541ceda0ca97148">ASSOC_BASED</a>; <span class="comment">// default</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <span class="keywordflow">else</span> <a class="code" href="globfit_8m.html#aff09b08430658e07eb738015822d1a88">if</a> ( !data_cost_mode_str.compare( <span class="stringliteral">&quot;band&quot;</span>    ) ) params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a41a53f7c47c539688a7e2380ac4356ae">data_cost_mode</a> = <a class="code" href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205a14338dc9ccb2b42d9935d0af7ba32346">BAND_BASED</a>;  <span class="comment">// banded</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordflow">else</span> <a class="code" href="globfit_8m.html#aff09b08430658e07eb738015822d1a88">if</a> ( !data_cost_mode_str.compare( <span class="stringliteral">&quot;instance&quot;</span>) ) params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a41a53f7c47c539688a7e2380ac4356ae">data_cost_mode</a> = <a class="code" href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205a4f16439ae31908d2d8582b604a8d9517">INSTANCE_BASED</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <span class="keywordflow">else</span> std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;could NOT parse data mode, assuming &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a41a53f7c47c539688a7e2380ac4356ae">data_cost_mode</a> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="comment">// constr_mode</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--constr-mode&quot;</span>, constr_mode_str );</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;parsed constr_mode_str: &quot;</span> &lt;&lt; constr_mode_str &lt;&lt; std::endl;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;             <span class="keywordflow">if</span> ( !constr_mode_str.compare( <span class="stringliteral">&quot;patch&quot;</span>  ) ) params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a663a00b70e24b4225541fc59ad331bfe">constr_mode</a> = <a class="code" href="class_g_f2_1_1_problem_setup.html#a8399b83e842d43dd98e996176975f3abac91de41c47bf1649e5508a8555bf9c03">PATCH_WISE</a>; <span class="comment">// default</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keywordflow">else</span> <a class="code" href="globfit_8m.html#aff09b08430658e07eb738015822d1a88">if</a> ( !constr_mode_str.compare( <span class="stringliteral">&quot;point&quot;</span>  ) ) params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a663a00b70e24b4225541fc59ad331bfe">constr_mode</a> = <a class="code" href="class_g_f2_1_1_problem_setup.html#a8399b83e842d43dd98e996176975f3abaff652c7c6c9d059acad418d4bdc58490">POINT_WISE</a>; <span class="comment">// banded</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordflow">else</span> <a class="code" href="globfit_8m.html#aff09b08430658e07eb738015822d1a88">if</a> ( !constr_mode_str.compare( <span class="stringliteral">&quot;hybrid&quot;</span> ) ) params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a663a00b70e24b4225541fc59ad331bfe">constr_mode</a> = <a class="code" href="class_g_f2_1_1_problem_setup.html#a8399b83e842d43dd98e996176975f3aba6339793b70b6d691664ccf1007a6cd9e">HYBRID</a>; <span class="comment">// hybrid</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keywordflow">else</span> std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;could NOT parse constraint mode, assuming &quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a663a00b70e24b4225541fc59ad331bfe">constr_mode</a> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">// pop_limit</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            pcl::console::parse_argument( argc, argv, <span class="stringliteral">&quot;--patch-pop-limit&quot;</span>, params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a679b05b7ae53c9627d510ece0749f747">patch_pop_limit</a> );</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;Usage:\t gurobi_opt --formulate\n&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; --scale &quot;</span> &lt;&lt; params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a3ee3f11fe8d9dc44b56057c65fe92ef5">scale</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; --cloud &quot;</span> &lt;&lt; cloud_path &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; --candidates &quot;</span> &lt;&lt; candidates_path &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; [--unary &quot;</span> &lt;&lt; params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a7069a872d02c3d98c2589b4f4ba7e3a2">weights</a>(0) &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; [--pw &quot;</span> &lt;&lt; params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a7069a872d02c3d98c2589b4f4ba7e3a2">weights</a>(1) &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; [--cmp &quot;</span> &lt;&lt; params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a7069a872d02c3d98c2589b4f4ba7e3a2">weights</a>(2) &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; [--cost-fn *&quot;</span> &lt;&lt; cost_string &lt;&lt; <span class="stringliteral">&quot;* (cexp | sqrt)&quot;</span> &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; [--data-mode *&quot;</span> &lt;&lt; (int)params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a41a53f7c47c539688a7e2380ac4356ae">data_cost_mode</a> &lt;&lt; <span class="stringliteral">&quot;* (assoc | band | instance) ]\n&quot;</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; [--constr-mode *&quot;</span> &lt;&lt; (<span class="keywordtype">int</span>)params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a663a00b70e24b4225541fc59ad331bfe">constr_mode</a> &lt;&lt; <span class="stringliteral">&quot;* (patch | point | hybrid ) ]\n&quot;</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; [--srand &quot;</span> &lt;&lt; srand_val &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; [--rod &quot;</span> &lt;&lt; problem_rel_path &lt;&lt; <span class="stringliteral">&quot;]\t\tRelative output path of the output matrix files\n&quot;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; [--patch-pop-limit &quot;</span> &lt;&lt; params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a679b05b7ae53c9627d510ece0749f747">patch_pop_limit</a> &lt;&lt; <span class="stringliteral">&quot;]\n&quot;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                  &lt;&lt; std::endl;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">if</span> ( !valid_input || pcl::console::find_switch(argc,argv,<span class="stringliteral">&quot;--help&quot;</span>) || pcl::console::find_switch(argc,argv,<span class="stringliteral">&quot;-h&quot;</span>) ) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;--scale, --cloud and --candidates are compulsory&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    } <span class="comment">// ... parse params</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// read points</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    _PointContainerT     <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span> ( verbose ) std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;reading cloud from &quot;</span> &lt;&lt; cloud_path &lt;&lt; <span class="stringliteral">&quot;...&quot;</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        io::readPoints&lt;_PointPrimitiveT&gt;( <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, cloud_path );</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> ( verbose ) std::cout &lt;&lt; <span class="stringliteral">&quot;reading cloud ok\n&quot;</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    } <span class="comment">//...read points</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// read primitives</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    _PrimitiveContainerT <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span> ( verbose ) std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;reading primitives from &quot;</span> &lt;&lt; candidates_path &lt;&lt; <span class="stringliteral">&quot;...&quot;</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        io::readPrimitives&lt;_PrimitiveT&gt;( <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a>, candidates_path );</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">if</span> ( verbose ) std::cout &lt;&lt; <span class="stringliteral">&quot;reading primitives ok\n&quot;</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    } <span class="comment">//...read primitives</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// read point-primitive associations</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    std::vector&lt;std::pair&lt;int,int&gt; &gt; points_primitives;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="namespace_g_f2_1_1io.html#a9bce496e4ce752c26c024362e8bca2d9">io::readAssociations</a>( points_primitives, <span class="stringliteral">&quot;points_primitives.txt&quot;</span>, NULL );</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a> = 0; <a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a> != points.size(); ++<a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a> )</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a> &gt; points_primitives.size() )</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;more points than associations...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        points[<a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a>].setTag( _PointPrimitiveT::GID, points_primitives[<a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a>].first );</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">if</span> ( points[<a class="code" href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a>].getTag(_PointPrimitiveT::GID) == -1 )</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;point assigned to patch with id -1&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    } <span class="comment">//...read associations</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="struct_g_f2_1_1_abstract_primitive_primitive_energy_functor.html">AbstractPrimitivePrimitiveEnergyFunctor&lt;Scalar,_PrimitiveT&gt;</a> *primPrimDistFunctor = NULL;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// parse cost function</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;             <span class="keywordflow">if</span> ( !cost_string.compare(<span class="stringliteral">&quot;cexp&quot;</span>) )    primPrimDistFunctor = <span class="keyword">new</span> <a class="code" href="struct_g_f2_1_1_c_exp_primitive_primitive_energy_functor.html">CExpPrimitivePrimitiveEnergyFunctor&lt;Scalar,_PrimitiveT&gt;</a>( params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#aea20a9c94d97aedba5d88717f6ed9c55">angles</a> );</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !cost_string.compare(<span class="stringliteral">&quot;sqrt&quot;</span>) )    primPrimDistFunctor = <span class="keyword">new</span> <a class="code" href="struct_g_f2_1_1_sqrt_primitive_primitive_energy_functor.html">SqrtPrimitivePrimitiveEnergyFunctor&lt;Scalar,_PrimitiveT&gt;</a>( params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#aea20a9c94d97aedba5d88717f6ed9c55">angles</a> );</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">else</span>                                        std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;Could not parse cost functor input...&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    } <span class="comment">//...parse cost function</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// WORK</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="namespace_g_f2_1_1problem_setup.html#a22d94ef9bbac504c10480be5922bc805">problemSetup::OptProblemT</a> <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">int</span> err = formulate&lt;_PointPrimitiveDistanceFunctor&gt;( <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                                       , <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                                       , <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                                       , params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a663a00b70e24b4225541fc59ad331bfe">constr_mode</a></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                                       , params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a41a53f7c47c539688a7e2380ac4356ae">data_cost_mode</a></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                                       , params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a3ee3f11fe8d9dc44b56057c65fe92ef5">scale</a></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                                                       , params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a7069a872d02c3d98c2589b4f4ba7e3a2">weights</a></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                                                       , primPrimDistFunctor</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                                       , params.<a class="code" href="struct_g_f2_1_1_problem_setup_params.html#a679b05b7ae53c9627d510ece0749f747">patch_pop_limit</a></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                                       , verbose );</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// dump. default output: ./problem/*.csv; change by --rod</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS == err )</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        std::string parent_path = <a class="code" href="function__handle_8m.html#a03d2a3685385f82943527be28e035ad9">boost::filesystem::path</a>(candidates_path).parent_path().string();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">if</span> ( !parent_path.empty() )     parent_path += <span class="stringliteral">&quot;/&quot;</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">else</span>                            parent_path =  <span class="stringliteral">&quot;.&quot;</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        std::string problem_path = parent_path + <span class="stringliteral">&quot;/&quot;</span> + problem_rel_path;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        problem.write( problem_path );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    } <span class="comment">//...dump</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// cleanup</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> ( primPrimDistFunctor ) { <span class="keyword">delete</span> primPrimDistFunctor; primPrimDistFunctor = NULL; }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;} <span class="comment">//...ProblemSetup::formulateCli()</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="keyword">template</span> &lt; <span class="keyword">class </span>_PointPrimitiveDistanceFunctor</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;         , <span class="keyword">class </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;         , <span class="keyword">class </span>_PointContainerT</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;         , <span class="keyword">class </span>_PrimitiveT</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         , <span class="keyword">class </span>_PointPrimitiveT</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;         , <span class="keyword">typename</span> _Scalar</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;         &gt; <span class="keywordtype">int</span></div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="class_g_f2_1_1_problem_setup.html#a24c0d41521dfc1e1bd3d6190be530cd8">  181</a></span>&#160;<a class="code" href="class_g_f2_1_1_problem_setup.html#a24c0d41521dfc1e1bd3d6190be530cd8">ProblemSetup::formulate</a>( <a class="code" href="namespace_g_f2_1_1problem_setup.html#a22d94ef9bbac504c10480be5922bc805">problemSetup::OptProblemT</a>                                          &amp; <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                       , _PrimitiveContainerT                                          <span class="keyword">const</span>&amp; <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                       , _PointContainerT                                              <span class="keyword">const</span>&amp; <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                       <span class="comment">//, std::vector&lt;std::pair&lt;int,int&gt; &gt;                              const&amp; points_primitives</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                       , <a class="code" href="class_g_f2_1_1_problem_setup.html#a8399b83e842d43dd98e996176975f3ab">CONSTR_MODE</a>                                                   <span class="keyword">const</span>  constr_mode</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                       , <a class="code" href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205">DATA_COST_MODE</a>                                                <span class="keyword">const</span>  data_cost_mode</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                       , _Scalar                                                       <span class="keyword">const</span>  <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                       , Eigen::Matrix&lt;_Scalar,-1,1&gt;                                   <span class="keyword">const</span>&amp; weights</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                       , <a class="code" href="struct_g_f2_1_1_abstract_primitive_primitive_energy_functor.html">AbstractPrimitivePrimitiveEnergyFunctor&lt;_Scalar,_PrimitiveT&gt;</a>* <span class="keyword">const</span>&amp; primPrimDistFunctor</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                       , <span class="keywordtype">int</span>                                                           <span class="keyword">const</span>  patch_pop_limit</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                       , <span class="keywordtype">int</span>                                                           <span class="keyword">const</span>  verbose</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        )</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;{</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_g_f2_1_1problem_setup.html#a22d94ef9bbac504c10480be5922bc805">problemSetup::OptProblemT</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// work - formulate problem</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">int</span> err = EXIT_SUCCESS;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// log</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> ( verbose ) { std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;formulating problem...\n&quot;</span>; fflush(stdout); }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keyword">typedef</span> std::pair&lt;int,int&gt; IntPair;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">/*   */</span> std::map &lt;IntPair,int&gt; lids_varids;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// ____________________________________________________</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">// Variables - Add variables to problem</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordtype">char</span> name[16];</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> = 0; <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> != prims.size(); ++<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> )</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> lid1 = 0; lid1 != prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].size(); ++lid1 )</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="comment">// add var</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="keywordtype">int</span> gid     = prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>][lid1].getTag( _PrimitiveT::GID );</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <span class="keywordtype">int</span> dir_gid = prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>][lid1].getTag( _PrimitiveT::DIR_GID );</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                sprintf( name, <span class="stringliteral">&quot;x_%d_%d&quot;</span>, gid, dir_gid );</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="comment">// store var_id for later, add binary variable</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                lids_varids[ IntPair(<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>,lid1) ] = problem.addVariable( OptProblemT::BOUND::RANGE, 0.0, 1.0, OptProblemT::VAR_TYPE::INTEGER );</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    } <span class="comment">// ... variables</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">// ____________________________________________________</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// Lin constraints</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS == err )</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">switch</span> ( constr_mode )</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="keywordflow">case</span> CONSTR_MODE::POINT_WISE:</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                err = problemSetup::everyPointNeedsPatchConstraint&lt;_PointPrimitiveDistanceFunctor, _PrimitiveT, _PointPrimitiveT&gt;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                        ( <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a>, <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a>, <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, lids_varids, weights, <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a> );</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keywordflow">case</span> CONSTR_MODE::PATCH_WISE:</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                err = problemSetup::everyPatchNeedsDirectionConstraint&lt;_PointPrimitiveDistanceFunctor, _PrimitiveT, _PointPrimitiveT&gt;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                        ( <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a>, <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a>, <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, lids_varids, weights, <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a> );</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="keywordflow">case</span> CONSTR_MODE::HYBRID:</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                err = problemSetup::largePatchesNeedDirectionConstraint&lt;_PointPrimitiveDistanceFunctor, _PrimitiveT, _PointPrimitiveT&gt;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                        ( <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a>, <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a>, <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, lids_varids, weights, <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a>, patch_pop_limit );</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        } <span class="comment">//...switch constr_mode</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">// Error check - Lin constraints</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">if</span> ( EXIT_SUCCESS != err )</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;lin constraints setup returned error &quot;</span> &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    } <span class="comment">//...Lin constraints</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// ____________________________________________________</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// Unary cost -&gt; lin objective</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS == err )</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">switch</span> ( data_cost_mode )</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205a12a8aeff7c65ddca3541ceda0ca97148">ASSOC_BASED</a>:</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                err = problemSetup::associationBasedDataCost&lt;_PointPrimitiveDistanceFunctor, _PrimitiveT, _PointPrimitiveT&gt;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                        ( <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a>, <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a>, <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, lids_varids, weights, <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a> );</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205a4f16439ae31908d2d8582b604a8d9517">INSTANCE_BASED</a>:</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                err = problemSetup::instanceBasedDataCost&lt;_PointPrimitiveDistanceFunctor, _PrimitiveT, _PointPrimitiveT&gt;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                        ( <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a>, <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a>, <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, lids_varids, weights, <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a> );</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205a14338dc9ccb2b42d9935d0af7ba32346">BAND_BASED</a>:</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                err = problemSetup::bandBasedDataCost&lt;_PointPrimitiveDistanceFunctor, _PrimitiveT, _PointPrimitiveT&gt;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                        ( <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a>, <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a>, <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a>, lids_varids, weights, <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a> );</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        } <span class="comment">//...switch data_cost_mode</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    } <span class="comment">//...unary cost</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// Error check - Unary costs</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS != err )</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;data cost setup returned error &quot;</span> &lt;&lt; err &lt;&lt; std::endl;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// ____________________________________________________</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// Pairwise cost -&gt; quad objective</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> ( EXIT_SUCCESS == err )</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> = 0; <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> != prims.size(); ++<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> )</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> lid1 = 0; lid1 != prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].size(); ++lid1 )</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> olid = 0; olid != prims.size(); ++olid )</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> olid1 = 0; olid1 != prims[olid].size(); ++olid1 )</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        <span class="comment">// skip same line, that&#39;s always zero</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                        <span class="keywordflow">if</span> ( (<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> == olid) &amp;&amp; (lid1 == olid1) ) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                        _Scalar <a class="code" href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a> = primPrimDistFunctor-&gt;<a class="code" href="struct_g_f2_1_1_abstract_primitive_primitive_energy_functor.html#ab45c7a78686631f1ee64ac43c260db06">eval</a>( prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>][lid1], prims[olid][olid1] );</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">//                            if ( prims[lid][lid1].getTag(_PrimitiveT::DIR_GID) == prims[olid][olid1].getTag(_PrimitiveT::DIR_GID) )</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">//                                dist += Scalar(1);</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                        dist *= weights(1);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        problem.addQObjective( lids_varids[ IntPair(<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>,lid1) ], lids_varids[ IntPair(olid,olid1) ], dist );</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                    } <span class="comment">// ... olid1</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                } <span class="comment">// ... olid</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            } <span class="comment">// ... lid1</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        } <span class="comment">// ... lid</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    } <span class="comment">//...pairwise cost</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// log</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> ( (EXIT_SUCCESS == err) &amp;&amp; verbose )</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        problem.printProblem();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;formulating problem finished\n&quot;</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        fflush(stdout);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    } <span class="comment">//...log</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;} <span class="comment">//...ProblemSetup::formulate()</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">//____________________________________________namespace problemSetup __________________________________________________</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="namespace_g_f2_1_1problem_setup.html">  323</a></span>&#160;<span class="keyword">namespace </span>problemSetup {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">//____________________________________________Constraints__________________________________________________</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keyword">template</span> &lt; <span class="keyword">class </span>_PointPrimitiveDistanceFunctor</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;             , <span class="keyword">class </span>_PrimitiveT        <span class="comment">/* = typename _PrimitiveContainerT::value_type::value_type */</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;             , <span class="keyword">class </span>_PointPrimitiveT   <span class="comment">/* = typename _PointContainerT::value_type */</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;             , <span class="keyword">typename</span> _Scalar</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;             , <span class="keyword">class </span>_OptProblemT</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;             , <span class="keyword">class </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;             , <span class="keyword">class </span>_PointContainerT</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;             , <span class="keyword">class </span>_AssocT</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;             , <span class="keyword">class </span>_WeightsT</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;             &gt;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="namespace_g_f2_1_1problem_setup.html#aaca9668906484db365db364bc762207e">  340</a></span>&#160;    <a class="code" href="namespace_g_f2_1_1problem_setup.html#aaca9668906484db365db364bc762207e">everyPointNeedsPatchConstraint</a>( _OptProblemT              &amp; <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                  , _PrimitiveContainerT <span class="keyword">const</span>&amp; <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                  , _PointContainerT     <span class="keyword">const</span>&amp; <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                  , _AssocT              <span class="keyword">const</span>&amp; lids_varids</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                  , _WeightsT            <span class="keyword">const</span>&amp; <span class="comment">/*weights*/</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                  , _Scalar              <span class="keyword">const</span>  <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a> )</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keyword">typedef</span> <span class="keyword">typename</span> _AssocT::key_type      IntPair;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keyword">typedef</span> <span class="keyword">typename</span> _OptProblemT::Scalar   ProblemScalar;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordtype">int</span> err = EXIT_SUCCESS;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        std::set&lt; std::vector&lt;ProblemScalar&gt; &gt; uniqueA;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="comment">// each point needs at least one line</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != points.size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="comment">// work</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            std::vector&lt;ProblemScalar&gt; coeffs( problem.getVarCount(), 0 );</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordtype">bool</span> non_zero = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> = 0; <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> != prims.size(); ++<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> )</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> lid1 = 0; lid1 != prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].size(); ++lid1 )</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    _Scalar <a class="code" href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a> = _PointPrimitiveDistanceFunctor::template eval&lt;_Scalar&gt;( points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>], prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>][lid1] );</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                    <span class="keywordflow">if</span> ( dist &lt; scale )</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                        coeffs[ <span class="comment">/* varid: */</span> lids_varids.at(IntPair(<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>,lid1)) ] = 1.0;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                        non_zero = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keywordflow">if</span> ( non_zero )</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <span class="keywordtype">unsigned</span> prev_size = uniqueA.size();</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                uniqueA.insert( coeffs );</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <span class="keywordflow">if</span> ( uniqueA.size() &gt; prev_size )</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    problem.addLinConstraint( _OptProblemT::BOUND::GREATER_EQ, 1, problem.getINF(), coeffs );</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        } <span class="comment">//... for each point</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    } <span class="comment">//...everyPointNeedsPatchConstraint</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keyword">template</span> &lt; <span class="keyword">class </span>_PointPrimitiveDistanceFunctor</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;             , <span class="keyword">class </span>_PrimitiveT        <span class="comment">/* = typename _PrimitiveContainerT::value_type::value_type */</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;             , <span class="keyword">class </span>_PointPrimitiveT   <span class="comment">/* = typename _PointContainerT::value_type */</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;             , <span class="keyword">typename</span> _Scalar</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;             , <span class="keyword">class </span>_OptProblemT</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;             , <span class="keyword">class </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;             , <span class="keyword">class </span>_PointContainerT</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;             , <span class="keyword">class </span>_AssocT</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;             , <span class="keyword">class </span>_WeightsT</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;             &gt;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="namespace_g_f2_1_1problem_setup.html#a16dfa546232f01a3282ffdfb60fc79a8">  395</a></span>&#160;    <a class="code" href="namespace_g_f2_1_1problem_setup.html#a16dfa546232f01a3282ffdfb60fc79a8">everyPatchNeedsDirectionConstraint</a>( _OptProblemT              &amp; <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                      , _PrimitiveContainerT <span class="keyword">const</span>&amp; <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                      , _PointContainerT     <span class="keyword">const</span>&amp; <span class="comment">/*points*/</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                      , _AssocT              <span class="keyword">const</span>&amp; lids_varids</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                      , _WeightsT            <span class="keyword">const</span>&amp; <span class="comment">/*weights*/</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                                      , _Scalar              <span class="keyword">const</span>  <span class="comment">/*scale*/</span> )</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keyword">typedef</span> <span class="keyword">typename</span> _AssocT::key_type IntPair;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordtype">int</span> err = EXIT_SUCCESS;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="comment">// one direction / patch needs to be choosen</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        std::vector&lt; double              &gt; coeffs ( problem.getVarCount(), 0 ); <span class="comment">// constraint coefficient line in A</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        std::set   &lt; std::vector&lt;double&gt; &gt; uniqueA;                             <span class="comment">// to ensure unique constraints</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="comment">// for all patches</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> = 0; <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> != prims.size(); ++<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> )</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="comment">// init row to 0</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            std::fill( coeffs.begin(), coeffs.end(), 0 );</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="comment">// add 1 for each direction patch -&gt; at least one direction has to be chosen for this patch</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> lid1 = 0; lid1 != prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].size(); ++lid1 )</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                coeffs[ <span class="comment">/* varid: */</span> lids_varids.at(IntPair(<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>,lid1)) ] = 1.0;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="comment">// unique insertion</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="keywordtype">unsigned</span> prev_size = uniqueA.size(); <span class="comment">// store prev set size to check for unique insert</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            uniqueA.insert( coeffs );            <span class="comment">// insert into set</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordflow">if</span> ( uniqueA.size() &gt; prev_size )    <span class="comment">// if line was unique, add to problem</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                problem.addLinConstraint( _OptProblemT::BOUND::GREATER_EQ, 1, problem.getINF(), coeffs ); <span class="comment">// 1 &lt;= A( lid, : ) * X &lt;= INF</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        } <span class="comment">// ... for each patch</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    } <span class="comment">// ...everyPatchNeedsDirectionConstraint</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keyword">template</span> &lt; <span class="keyword">class </span>_PointPrimitiveDistanceFunctor</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;             , <span class="keyword">class </span>_PrimitiveT</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;             , <span class="keyword">class </span>_PointPrimitiveT</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;             , <span class="keyword">typename</span> _Scalar</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;             , <span class="keyword">class </span>_OptProblemT</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;             , <span class="keyword">class </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;             , <span class="keyword">class </span>_PointContainerT</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;             , <span class="keyword">class </span>_AssocT</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;             , <span class="keyword">class </span>_WeightsT</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;             &gt;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="namespace_g_f2_1_1problem_setup.html#a1b8fa7d0f5ce7e0627ba0c0aeac33c74">  447</a></span>&#160;    <a class="code" href="namespace_g_f2_1_1problem_setup.html#a1b8fa7d0f5ce7e0627ba0c0aeac33c74">largePatchesNeedDirectionConstraint</a>( _OptProblemT              &amp; <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                                       , _PrimitiveContainerT <span class="keyword">const</span>&amp; <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                       , _PointContainerT     <span class="keyword">const</span>&amp; <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                                       , _AssocT              <span class="keyword">const</span>&amp; lids_varids</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                                       , _WeightsT            <span class="keyword">const</span>&amp; <span class="comment">/*weights*/</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                                       , _Scalar              <span class="keyword">const</span>  <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                                       , <span class="keywordtype">int</span>                  <span class="keyword">const</span>  pop_limit )</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keyword">typedef</span> <span class="keyword">typename</span> _AssocT::key_type      IntPair;        <span class="comment">// &lt;lid,lid1&gt; pair to retrieve the linear index of a variable in the problem using lids_varids</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keyword">typedef</span> <span class="keyword">typename</span> _OptProblemT::Scalar   ProblemScalar;  <span class="comment">// Scalar in OptProblem, usually has to be double because of the implementation</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keyword">typedef</span> std::vector&lt;ProblemScalar&gt;      RowInA;         <span class="comment">// &quot;A&quot; is the constraint matrix</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keyword">typedef</span> std::set&lt;int&gt;                   PIdList;        <span class="comment">// unique list of point ids</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        std::pair&lt;int,int&gt; stats(0,0); <span class="comment">// debug</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordtype">int</span> err = EXIT_SUCCESS;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="comment">// count populations</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keyword">typedef</span> std::map&lt;int,PIdList&gt; PopT;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        PopT populations; <span class="comment">// populations[gid] = list of points with GID==patch_id</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != points.size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> gid = points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].getTag(_PointPrimitiveT::GID);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                populations[gid].insert( <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> );</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                <span class="comment">//++populations[ gid ];</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="comment">// debug</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="keywordflow">for</span> ( PopT::const_iterator <a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a> = populations.begin(); <a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a> != populations.end(); ++<a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a> )</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;pop[&quot;</span> &lt;&lt; <a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a>-&gt;first &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a>-&gt;second.size() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">// Work on large patches, and record small patches</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="comment">// One direction / patch needs to be choosen for large patches</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        RowInA             coeffs ( problem.getVarCount(), 0 ); <span class="comment">// constraint coefficient line in A</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        std::set&lt; RowInA &gt; uniqueA;                             <span class="comment">// to ensure unique constraints</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        PIdList            smalls_points;                       <span class="comment">// contains point ids for points that are in small patches</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="comment">// for all patches</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> = 0; <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> != prims.size(); ++<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> )</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="keywordflow">if</span> ( !prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].<a class="code" href="scale__optimization_8m.html#aa3bc9f08cad6c0b386cc994140e1ce2e">size</a>() ) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="comment">// cache patch group id</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> gid = prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].at(0).getTag(_PrimitiveT::GID);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="comment">// check for population size</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">if</span> ( populations[gid].<a class="code" href="scale__optimization_8m.html#aa3bc9f08cad6c0b386cc994140e1ce2e">size</a>() &lt; pop_limit )</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            { <span class="comment">// small patch</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <span class="keywordflow">if</span> ( populations[gid].<a class="code" href="scale__optimization_8m.html#aa3bc9f08cad6c0b386cc994140e1ce2e">size</a>() &lt; 1 ) std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;patch with no points...needs to be expensive!! TODO&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                <span class="comment">// add all points to point-wise constraints todo list</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                PIdList::const_iterator end_it = populations[gid].end();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                <span class="keywordflow">for</span> ( PIdList::const_iterator <a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a> = populations[gid].begin(); <a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a> != end_it; ++<a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a> )</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    smalls_points.insert( *<a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a> );</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            { <span class="comment">// create patch-wise constraint</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <span class="comment">// init row to 0</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                std::fill( coeffs.begin(), coeffs.end(), 0 );</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                <span class="comment">// add 1 for each direction patch -&gt; at least one direction has to be chosen for this patch</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> lid1 = 0; lid1 != prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].size(); ++lid1 )</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                    coeffs[ <span class="comment">/* varid: */</span> lids_varids.at(IntPair(<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>,lid1)) ] = ProblemScalar( 1. );</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                <span class="comment">// unique insertion</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <span class="keywordtype">unsigned</span> prev_size = uniqueA.size(); <span class="comment">// store prev set size to check for unique insert</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                uniqueA.insert( coeffs );            <span class="comment">// insert into set</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="keywordflow">if</span> ( uniqueA.size() &gt; prev_size )    <span class="comment">// if line was unique, add to problem</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    ++stats.first;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                    problem.addLinConstraint( _OptProblemT::BOUND::GREATER_EQ, 1, problem.getINF(), coeffs ); <span class="comment">// 1 &lt;= A( lid, : ) * X &lt;= INF</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        } <span class="comment">// ... for each patch</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">// set-up point-wise constraints for small patches</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        PIdList::const_iterator end_it = smalls_points.end();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">for</span> ( PIdList::const_iterator <a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a> = smalls_points.begin(); <a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a> != end_it; ++<a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a> )</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = *<a class="code" href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="comment">// work - check distance to all lines, select the ones in range</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            RowInA coeffs  ( problem.getVarCount(), 0 );</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="keywordtype">bool</span>   non_zero( <span class="keyword">false</span> );</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="comment">// for each patch and direction</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> = 0; <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> != prims.size(); ++<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> )</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> lid1 = 0; lid1 != prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].size(); ++lid1 )</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                    _Scalar <a class="code" href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a> = _PointPrimitiveDistanceFunctor::template eval&lt;_Scalar&gt;( points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>], prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>][lid1] );</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                    <span class="keywordflow">if</span> ( dist &lt; scale )</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                    {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                        coeffs[ <span class="comment">/* varid: */</span> lids_varids.at(IntPair(<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>,lid1)) ] = ProblemScalar( 1. ) ;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                        non_zero = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                    }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <span class="keywordflow">if</span> ( non_zero )</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                <span class="keywordtype">unsigned</span> prev_size = uniqueA.size();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                uniqueA.insert( coeffs );</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                <span class="keywordflow">if</span> ( uniqueA.size() &gt; prev_size )</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                    ++stats.second;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                    problem.addLinConstraint( _OptProblemT::BOUND::GREATER_EQ, 1, problem.getINF(), coeffs );</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        } <span class="comment">//... for each point</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;added &quot;</span>  &lt;&lt; stats.first &lt;&lt; <span class="stringliteral">&quot; large and &quot;</span> &lt;&lt; stats.second &lt;&lt; <span class="stringliteral">&quot; small patch constraint lines&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    } <span class="comment">// ...everyPatchNeedsDirectionConstraint</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="comment">//____________________________________________DataCosts____________________________________________</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keyword">template</span> &lt; <span class="keyword">class </span>_PointPrimitiveDistanceFunctor</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;             , <span class="keyword">class </span>_PrimitiveT        <span class="comment">/* = typename _PrimitiveContainerT::value_type::value_type */</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;             , <span class="keyword">class </span>_PointPrimitiveT   <span class="comment">/* = typename _PointContainerT::value_type */</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;             , <span class="keyword">typename</span> _Scalar</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;             , <span class="keyword">class </span>_OptProblemT</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;             , <span class="keyword">class </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;             , <span class="keyword">class </span>_PointContainerT</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;             , <span class="keyword">class </span>_AssocT</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;             , <span class="keyword">class </span>_WeightsT</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;             &gt;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="namespace_g_f2_1_1problem_setup.html#ac3adb4595ac34c9610acaa4836e36ddb">  574</a></span>&#160;    <a class="code" href="namespace_g_f2_1_1problem_setup.html#ac3adb4595ac34c9610acaa4836e36ddb">bandBasedDataCost</a>( _OptProblemT              &amp; <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                     , _PrimitiveContainerT <span class="keyword">const</span>&amp; <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                     , _PointContainerT     <span class="keyword">const</span>&amp; <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                     , _AssocT              <span class="keyword">const</span>&amp; lids_varids</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                     , _WeightsT            <span class="keyword">const</span>&amp; weights</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                     , _Scalar              <span class="keyword">const</span>  <a class="code" href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a> )</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keyword">typedef</span> <span class="keyword">typename</span> _AssocT::key_type IntPair;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordtype">int</span> err = EXIT_SUCCESS;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> = 0; <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> != prims.size(); ++<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> )</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> lid1 = 0; lid1 != prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].size(); ++lid1 )</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="comment">// unary cost</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                    <span class="keywordtype">unsigned</span> cnt = 0;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                    _Scalar unary_i = _Scalar(0);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != points.size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                    {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                        <span class="comment">// if within scale, add unary cost</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                        _Scalar <a class="code" href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a> = _PointPrimitiveDistanceFunctor::template eval&lt;_Scalar&gt;( points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>], prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>][lid1] );</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                        <span class="keywordflow">if</span> ( dist &lt; scale ) <span class="comment">//TODO: patch membership</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                        {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                            unary_i += <a class="code" href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                            ++cnt;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                        }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                            <span class="comment">//unary_i += dist / scale;</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                    } <span class="comment">// for points</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                    _Scalar coeff = <span class="comment">/* complx: */</span> weights(2) + <span class="comment">/* unary: */</span> weights(0) * unary_i / _Scalar(cnt);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    <span class="keywordflow">if</span> ( !cnt )</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                        coeff = weights(2) + weights(0) * 2;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    problem.addLinObjective( <span class="comment">/* var_id: */</span> lids_varids.at( IntPair(<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>,lid1) )</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                           , coeff );</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        } <span class="comment">//...for patches</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    } <span class="comment">//...bandBasedDataCost</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keyword">template</span> &lt; <span class="keyword">class </span>_PointPrimitiveDistanceFunctor</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;             , <span class="keyword">class </span>_PrimitiveT        <span class="comment">/* = typename _PrimitiveContainerT::value_type::value_type */</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;             , <span class="keyword">class </span>_PointPrimitiveT   <span class="comment">/* = typename _PointContainerT::value_type */</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;             , <span class="keyword">typename</span> _Scalar</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;             , <span class="keyword">class </span>_OptProblemT</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;             , <span class="keyword">class </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;             , <span class="keyword">class </span>_PointContainerT</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;             , <span class="keyword">class </span>_AssocT</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;             , <span class="keyword">class </span>_WeightsT</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;             &gt;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="namespace_g_f2_1_1problem_setup.html#a1b0396be5186f8f141d421ca748bee59">  631</a></span>&#160;    <a class="code" href="namespace_g_f2_1_1problem_setup.html#a1b0396be5186f8f141d421ca748bee59">associationBasedDataCost</a>( _OptProblemT              &amp; <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                            , _PrimitiveContainerT <span class="keyword">const</span>&amp; <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                            , _PointContainerT     <span class="keyword">const</span>&amp; <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                            , _AssocT              <span class="keyword">const</span>&amp; lids_varids</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                            , _WeightsT            <span class="keyword">const</span>&amp; weights</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                            , _Scalar              <span class="keyword">const</span>  <span class="comment">/*scale*/</span> )</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keyword">typedef</span> <span class="keyword">typename</span> _AssocT::key_type IntPair;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="keywordtype">int</span> err = EXIT_SUCCESS;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> = 0; <a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> != prims.size(); ++<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a> )</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="comment">// check, if any directions for patch</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="keywordflow">if</span> ( !prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].<a class="code" href="scale__optimization_8m.html#aa3bc9f08cad6c0b386cc994140e1ce2e">size</a>() )</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                <span class="comment">//std::cerr &lt;&lt; &quot;[&quot; &lt;&lt; __func__ &lt;&lt; &quot;]: &quot; &lt;&lt; &quot;no directions for patch[&quot; &lt;&lt; lid &lt;&lt; &quot;]! This shouldn&#39;t happen. Skipping patch...&quot; &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="comment">// cache patch group id to match with point group ids</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> gid = prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>][0].getTag( _PrimitiveT::GID );</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="comment">// for each direction</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> lid1 = 0; lid1 != prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>].size(); ++lid1 )</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                <span class="comment">// point count for normalization</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                <span class="keywordtype">unsigned</span> cnt = 0;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                <span class="comment">// data-cost coefficient (output)</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                _Scalar unary_i = _Scalar(0);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                <span class="comment">// for each point, check if assigned to main patch (TODO: move assignment test to earlier, it&#39;s indep of lid1)</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                <span class="keywordflow">for</span> ( <span class="keywordtype">size_t</span> <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> = 0; <a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> != points.size(); ++<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a> )</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                    <span class="comment">//if ( points[pid].getTag( PointPrimitiveT::GID ) == static_cast&lt;int&gt;(lid) )</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                    <span class="keywordflow">if</span> ( points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>].getTag( _PointPrimitiveT::GID ) == gid )</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                    {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                        <span class="comment">// if within scale, add unary cost</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                        _Scalar <a class="code" href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a> = _PointPrimitiveDistanceFunctor::template eval&lt;_Scalar&gt;( points[<a class="code" href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a>], prims[<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>][lid1] );</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                        unary_i += <a class="code" href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                        ++cnt;              <span class="comment">// normalizer</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                    }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                } <span class="comment">// for points</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                _Scalar coeff = cnt ? <span class="comment">/* complx: */</span> weights(2) + <span class="comment">/* unary: */</span> weights(0) * unary_i / _Scalar(cnt)</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                                    : <span class="comment">/* complx: */</span> weights(2) + <span class="comment">/* unary: */</span> weights(0) * _Scalar(2);            <span class="comment">// add large weight, if no points assigned</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="comment">// add to problem</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                problem.addLinObjective( <span class="comment">/* var_id: */</span> lids_varids.at( IntPair(<a class="code" href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a>,lid1) )</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                       , <span class="comment">/*  value: */</span> coeff );</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            } <span class="comment">//...for each direction</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        } <span class="comment">//...for each patch</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    } <span class="comment">//...associationBasedDataCost</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keyword">template</span> &lt; <span class="keyword">class </span>_PointPrimitiveDistanceFunctor</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;             , <span class="keyword">class </span>_PrimitiveT        <span class="comment">/* = typename _PrimitiveContainerT::value_type::value_type */</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;             , <span class="keyword">class </span>_PointPrimitiveT   <span class="comment">/* = typename _PointContainerT::value_type */</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;             , <span class="keyword">typename</span> _Scalar</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;             , <span class="keyword">class </span>_OptProblemT</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;             , <span class="keyword">class </span>_PrimitiveContainerT</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;             , <span class="keyword">class </span>_PointContainerT</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;             , <span class="keyword">class </span>_AssocT</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;             , <span class="keyword">class </span>_WeightsT</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;             &gt;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span></div>
<div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="namespace_g_f2_1_1problem_setup.html#a3e0aa0a6e8bb6bc9e2c0d0a676bf1141">  700</a></span>&#160;    <a class="code" href="namespace_g_f2_1_1problem_setup.html#a3e0aa0a6e8bb6bc9e2c0d0a676bf1141">instanceBasedDataCost</a>( _OptProblemT              &amp; <a class="code" href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                            , _PrimitiveContainerT <span class="keyword">const</span>&amp; <a class="code" href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                            , _PointContainerT     <span class="keyword">const</span>&amp; <a class="code" href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                            , _AssocT              <span class="keyword">const</span>&amp; lids_varids</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                            , _WeightsT            <span class="keyword">const</span>&amp; weights</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                            , _Scalar              <span class="keyword">const</span>  <span class="comment">/*scale*/</span> )</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="keywordtype">int</span> err = EXIT_SUCCESS;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            std::cerr &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; __func__ &lt;&lt; <span class="stringliteral">&quot;]: &quot;</span> &lt;&lt; <span class="stringliteral">&quot;UNIMPLEMENTED&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="comment">//        std::map&lt;int, std::pair&lt;Scalar,int&gt; &gt; repr_dirs; // [lid] = &lt;cost,npoints&gt;</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="comment">//        // unary cost -&gt; lin objective</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="comment">//        for ( size_t lid = 0; lid != prims.size(); ++lid )</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">//        {</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="comment">//            for ( size_t lid1 = 0; lid1 != prims[lid].size(); ++lid1 )</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="comment">//            {</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="comment">//                unsigned cnt = 0;</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">//                Scalar unary_i = Scalar(0);</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">//                for ( size_t pid = 0; pid != points.size(); ++pid )</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">//                {</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">//                    if ( points[pid].getTag( PointPrimitiveT::GID ) == static_cast&lt;int&gt;(lid) )</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="comment">//                    {</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="comment">//                        // if within scale, add unary cost</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="comment">//                        Scalar dist = PointPrimitiveDistanceFunctor::eval&lt;Scalar&gt;( points[pid], prims[lid][lid1] );</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="comment">//                        unary_i += dist;</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">//                        ++cnt;</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">//                    }</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="comment">//                } // for points</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="comment">//                if ( prims[lid].getTag(PrimitiveT::GID) != lid )</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="comment">//                    std::cerr &lt;&lt; &quot;[&quot; &lt;&lt; __func__ &lt;&lt; &quot;]: &quot; &lt;&lt; &quot;a;sldjfa;lkjdf, &quot; &lt;&lt; prims[lid].getTag(PrimitiveT::GID) &lt;&lt; &quot;lid != tag&quot; &lt;&lt; prims[lid].getTag(PrimitiveT::GID) &lt;&lt; std::endl;</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">//                if ( prims[lid].getTag(PrimitiveT::GID) == prims[lid1].getTag(PointPrimitiveT::GID) )</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="comment">//                    repr_dirs[ lid ] = std::pair&lt;Scalar,int&gt;( unary_i, cnt );</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="comment">//            }</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="comment">//        } // for lines</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="comment">//        for ( size_t lid = 0; lid != prims.size(); ++lid )</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="comment">//        {</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="comment">//            for ( size_t lid1 = 0; lid1 != prims[lid].size(); ++lid1 )</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">//            {</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">//                Scalar coeff = /* complx: */ weights(2) + /* unary: */ weights(0) * unary_i / Scalar(cnt);</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">//                if ( !cnt )</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">//                    coeff = weights(2) + weights(0) * 2;</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">//                problem.addLinObjective( /* var_id: */ lids_varids[Key(lid,lid1)]</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">//                        , coeff );</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">//            }</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">//        }</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    } <span class="comment">//...instanceBasedDataCost()</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;} <span class="comment">//...namespace ProblemSetup</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;} <span class="comment">//...namespace GF2</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="preprocessor">#endif // GF2_PROBLEMSETUP_HPP</span></div>
<div class="ttc" id="my__ply__read_8m_html_ab6eb9cb199df2a09b72fbc4375c0c335"><div class="ttname"><a href="my__ply__read_8m.html#ab6eb9cb199df2a09b72fbc4375c0c335">pid</a></div><div class="ttdeci">pid</div><div class="ttdef"><b>Definition:</b> <a href="my__ply__read_8m_source.html#l00011">my_ply_read.m:11</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_sqrt_primitive_primitive_energy_functor_html"><div class="ttname"><a href="struct_g_f2_1_1_sqrt_primitive_primitive_energy_functor.html">GF2::SqrtPrimitivePrimitiveEnergyFunctor</a></div><div class="ttdef"><b>Definition:</b> <a href="energy_functors_8h_source.html#l00096">energyFunctors.h:96</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_abstract_primitive_primitive_energy_functor_html"><div class="ttname"><a href="struct_g_f2_1_1_abstract_primitive_primitive_energy_functor.html">GF2::AbstractPrimitivePrimitiveEnergyFunctor</a></div><div class="ttdef"><b>Definition:</b> <a href="energy_functors_8h_source.html#l00078">energyFunctors.h:78</a></div></div>
<div class="ttc" id="class_g_f2_1_1_problem_setup_html_a8399b83e842d43dd98e996176975f3ab"><div class="ttname"><a href="class_g_f2_1_1_problem_setup.html#a8399b83e842d43dd98e996176975f3ab">GF2::ProblemSetup::CONSTR_MODE</a></div><div class="ttdeci">CONSTR_MODE</div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8h_source.html#l00156">problemSetup.h:156</a></div></div>
<div class="ttc" id="class_g_f2_1_1_problem_setup_html_a1435ec920286d0a310d673dfc1b72205a12a8aeff7c65ddca3541ceda0ca97148"><div class="ttname"><a href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205a12a8aeff7c65ddca3541ceda0ca97148">GF2::ProblemSetup::ASSOC_BASED</a></div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8h_source.html#l00152">problemSetup.h:152</a></div></div>
<div class="ttc" id="globfit_8m_html_a901eed5bfcfb9d1af7f58c545d1a88c4"><div class="ttname"><a href="globfit_8m.html#a901eed5bfcfb9d1af7f58c545d1a88c4">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="globfit_8m_source.html#l00015">globfit.m:15</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_problem_setup_params_html_aea20a9c94d97aedba5d88717f6ed9c55"><div class="ttname"><a href="struct_g_f2_1_1_problem_setup_params.html#aea20a9c94d97aedba5d88717f6ed9c55">GF2::ProblemSetupParams::angles</a></div><div class="ttdeci">std::vector&lt; _Scalar &gt; angles</div><div class="ttdoc">Desired angles. </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00016">parameters.h:16</a></div></div>
<div class="ttc" id="test0_8m_html_a60ccbcd450c9447c51f60d68cafad936"><div class="ttname"><a href="test0_8m.html#a60ccbcd450c9447c51f60d68cafad936">problem</a></div><div class="ttdeci">if sol problem</div><div class="ttdef"><b>Definition:</b> <a href="test0_8m_source.html#l00006">test0.m:6</a></div></div>
<div class="ttc" id="fmincon__merged_8m_html_ad50c0647c2d1ff3a3502b134abf52661"><div class="ttname"><a href="fmincon__merged_8m.html#ad50c0647c2d1ff3a3502b134abf52661">it</a></div><div class="ttdeci">end end ub lb for it</div><div class="ttdef"><b>Definition:</b> <a href="fmincon__merged_8m_source.html#l00066">fmincon_merged.m:66</a></div></div>
<div class="ttc" id="class_g_f2_1_1_problem_setup_html_aefb4febca1521ab72e3133b77626c6de"><div class="ttname"><a href="class_g_f2_1_1_problem_setup.html#aefb4febca1521ab72e3133b77626c6de">GF2::ProblemSetup::formulateCli</a></div><div class="ttdeci">static int formulateCli(int argc, char **argv)</div><div class="ttdoc">Step 2. Reads the output from generate and sets up the optimization problem in form of sparse matrice...</div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8hpp_source.html#l00020">problemSetup.hpp:20</a></div></div>
<div class="ttc" id="energy_functors_8h_html"><div class="ttname"><a href="energy_functors_8h.html">energyFunctors.h</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1problem_setup_html_a16dfa546232f01a3282ffdfb60fc79a8"><div class="ttname"><a href="namespace_g_f2_1_1problem_setup.html#a16dfa546232f01a3282ffdfb60fc79a8">GF2::problemSetup::everyPatchNeedsDirectionConstraint</a></div><div class="ttdeci">static int everyPatchNeedsDirectionConstraint(_OptProblemT &amp;problem, _PrimitiveContainerT const &amp;prims, _PointContainerT const &amp;, _AssocT const &amp;lids_varids, _WeightsT const &amp;, _Scalar const )</div><div class="ttdoc">Adds constraints to problem so, that each patch (prims[i] that have the same _PrimitiveT::GID) has at...</div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8hpp_source.html#l00395">problemSetup.hpp:395</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1io_html_a9bce496e4ce752c26c024362e8bca2d9"><div class="ttname"><a href="namespace_g_f2_1_1io.html#a9bce496e4ce752c26c024362e8bca2d9">GF2::io::readAssociations</a></div><div class="ttdeci">int readAssociations(std::vector&lt; std::pair&lt; int, int &gt; &gt; &amp;points_primitives, std::string const &amp;path, std::map&lt; int, int &gt; *linear_indices)</div><div class="ttdoc">Reads point-primitive associations from file. </div><div class="ttdef"><b>Definition:</b> <a href="io_8h_source.html#l00146">io.h:146</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_problem_setup_params_html_a7069a872d02c3d98c2589b4f4ba7e3a2"><div class="ttname"><a href="struct_g_f2_1_1_problem_setup_params.html#a7069a872d02c3d98c2589b4f4ba7e3a2">GF2::ProblemSetupParams::weights</a></div><div class="ttdeci">Eigen::Matrix&lt; _Scalar,-1, 1 &gt; weights</div><div class="ttdoc">Optimization weights. [ 0: unary, 1: pairwise, 2: complexity ]. </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00018">parameters.h:18</a></div></div>
<div class="ttc" id="class_g_f2_1_1_problem_setup_html_a1435ec920286d0a310d673dfc1b72205a14338dc9ccb2b42d9935d0af7ba32346"><div class="ttname"><a href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205a14338dc9ccb2b42d9935d0af7ba32346">GF2::ProblemSetup::BAND_BASED</a></div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8h_source.html#l00153">problemSetup.h:153</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1problem_setup_html_a1b8fa7d0f5ce7e0627ba0c0aeac33c74"><div class="ttname"><a href="namespace_g_f2_1_1problem_setup.html#a1b8fa7d0f5ce7e0627ba0c0aeac33c74">GF2::problemSetup::largePatchesNeedDirectionConstraint</a></div><div class="ttdeci">static int largePatchesNeedDirectionConstraint(_OptProblemT &amp;problem, _PrimitiveContainerT const &amp;prims, _PointContainerT const &amp;points, _AssocT const &amp;lids_varids, _WeightsT const &amp;, _Scalar const scale, int const pop_limit)</div><div class="ttdoc">Hybrid mode, large patches need one direction, points in small patches need to be assigned to one...</div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8hpp_source.html#l00447">problemSetup.hpp:447</a></div></div>
<div class="ttc" id="globfit_8m_html_ad71b2f1a5c693953c99f125619837e0c"><div class="ttname"><a href="globfit_8m.html#ad71b2f1a5c693953c99f125619837e0c">lid</a></div><div class="ttdeci">for lid</div><div class="ttdef"><b>Definition:</b> <a href="globfit_8m_source.html#l00029">globfit.m:29</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_abstract_primitive_primitive_energy_functor_html_ab45c7a78686631f1ee64ac43c260db06"><div class="ttname"><a href="struct_g_f2_1_1_abstract_primitive_primitive_energy_functor.html#ab45c7a78686631f1ee64ac43c260db06">GF2::AbstractPrimitivePrimitiveEnergyFunctor::eval</a></div><div class="ttdeci">virtual Scalar eval(PrimitiveT, PrimitiveT)</div><div class="ttdef"><b>Definition:</b> <a href="energy_functors_8h_source.html#l00085">energyFunctors.h:85</a></div></div>
<div class="ttc" id="class_g_f2_1_1_problem_setup_html_a1435ec920286d0a310d673dfc1b72205"><div class="ttname"><a href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205">GF2::ProblemSetup::DATA_COST_MODE</a></div><div class="ttdeci">DATA_COST_MODE</div><div class="ttdoc">Options to calculate data cost of primitive by. </div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8h_source.html#l00152">problemSetup.h:152</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1problem_setup_html_a1b0396be5186f8f141d421ca748bee59"><div class="ttname"><a href="namespace_g_f2_1_1problem_setup.html#a1b0396be5186f8f141d421ca748bee59">GF2::problemSetup::associationBasedDataCost</a></div><div class="ttdeci">static int associationBasedDataCost(_OptProblemT &amp;problem, _PrimitiveContainerT const &amp;prims, _PointContainerT const &amp;points, _AssocT const &amp;lids_varids, _WeightsT const &amp;weights, _Scalar const )</div><div class="ttdoc">Adds unary costs to problem based on point to primitive associations. </div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8hpp_source.html#l00631">problemSetup.hpp:631</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_problem_setup_params_html_a679b05b7ae53c9627d510ece0749f747"><div class="ttname"><a href="struct_g_f2_1_1_problem_setup_params.html#a679b05b7ae53c9627d510ece0749f747">GF2::ProblemSetupParams::patch_pop_limit</a></div><div class="ttdeci">int patch_pop_limit</div><div class="ttdoc">Point-count threshold, that decides if a patch is big or small. </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00024">parameters.h:24</a></div></div>
<div class="ttc" id="globfit_8m_html_ab9a89211ecb71d18bbd259853fda1c54"><div class="ttname"><a href="globfit_8m.html#ab9a89211ecb71d18bbd259853fda1c54">points</a></div><div class="ttdeci">points</div><div class="ttdef"><b>Definition:</b> <a href="globfit_8m_source.html#l00007">globfit.m:7</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_problem_setup_params_html_a3ee3f11fe8d9dc44b56057c65fe92ef5"><div class="ttname"><a href="struct_g_f2_1_1_problem_setup_params.html#a3ee3f11fe8d9dc44b56057c65fe92ef5">GF2::ProblemSetupParams::scale</a></div><div class="ttdeci">_Scalar scale</div><div class="ttdoc">Scale parameter of input. </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00014">parameters.h:14</a></div></div>
<div class="ttc" id="globfit_8m_html_aff09b08430658e07eb738015822d1a88"><div class="ttname"><a href="globfit_8m.html#aff09b08430658e07eb738015822d1a88">if</a></div><div class="ttdeci">if(0)%%read points cloud_p</div></div>
<div class="ttc" id="namespace_g_f2_1_1problem_setup_html_aaca9668906484db365db364bc762207e"><div class="ttname"><a href="namespace_g_f2_1_1problem_setup.html#aaca9668906484db365db364bc762207e">GF2::problemSetup::everyPointNeedsPatchConstraint</a></div><div class="ttdeci">static int everyPointNeedsPatchConstraint(_OptProblemT &amp;problem, _PrimitiveContainerT const &amp;prims, _PointContainerT const &amp;points, _AssocT const &amp;lids_varids, _WeightsT const &amp;, _Scalar const scale)</div><div class="ttdoc">Adds constraints to problem so, that each point has at least one line in scale radius that is selecte...</div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8hpp_source.html#l00340">problemSetup.hpp:340</a></div></div>
<div class="ttc" id="globfit_8m_html_a3d6cbfbc95fcc0bac7015e7f5743e466"><div class="ttname"><a href="globfit_8m.html#a3d6cbfbc95fcc0bac7015e7f5743e466">scale</a></div><div class="ttdeci">end end scale</div><div class="ttdef"><b>Definition:</b> <a href="globfit_8m_source.html#l00026">globfit.m:26</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_problem_setup_params_html"><div class="ttname"><a href="struct_g_f2_1_1_problem_setup_params.html">GF2::ProblemSetupParams</a></div><div class="ttdoc">Collection of parameters the ProblemSetup::formulate needs. </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00011">parameters.h:11</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1problem_setup_html_a22d94ef9bbac504c10480be5922bc805"><div class="ttname"><a href="namespace_g_f2_1_1problem_setup.html#a22d94ef9bbac504c10480be5922bc805">GF2::problemSetup::OptProblemT</a></div><div class="ttdeci">qcqpcpp::OptProblem&lt; double &gt; OptProblemT</div><div class="ttdoc">General problem type, most implementations require double, so it is fixed to double. </div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8h_source.html#l00019">problemSetup.h:19</a></div></div>
<div class="ttc" id="class_g_f2_1_1_problem_setup_html_a8399b83e842d43dd98e996176975f3aba6339793b70b6d691664ccf1007a6cd9e"><div class="ttname"><a href="class_g_f2_1_1_problem_setup.html#a8399b83e842d43dd98e996176975f3aba6339793b70b6d691664ccf1007a6cd9e">GF2::ProblemSetup::HYBRID</a></div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8h_source.html#l00156">problemSetup.h:156</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1problem_setup_html_ac3adb4595ac34c9610acaa4836e36ddb"><div class="ttname"><a href="namespace_g_f2_1_1problem_setup.html#ac3adb4595ac34c9610acaa4836e36ddb">GF2::problemSetup::bandBasedDataCost</a></div><div class="ttdeci">static int bandBasedDataCost(_OptProblemT &amp;problem, _PrimitiveContainerT const &amp;prims, _PointContainerT const &amp;points, _AssocT const &amp;lids_varids, _WeightsT const &amp;weights, _Scalar const scale)</div><div class="ttdoc">Adds unary costs to problem based on scale wide band assocation. </div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8hpp_source.html#l00574">problemSetup.hpp:574</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_problem_setup_params_html_a41a53f7c47c539688a7e2380ac4356ae"><div class="ttname"><a href="struct_g_f2_1_1_problem_setup_params.html#a41a53f7c47c539688a7e2380ac4356ae">GF2::ProblemSetupParams::data_cost_mode</a></div><div class="ttdeci">ProblemSetup::DATA_COST_MODE data_cost_mode</div><div class="ttdoc">Optoins defined ProblemSetup::DATA_COST_MODE. </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00022">parameters.h:22</a></div></div>
<div class="ttc" id="class_g_f2_1_1_problem_setup_html_a1435ec920286d0a310d673dfc1b72205a4f16439ae31908d2d8582b604a8d9517"><div class="ttname"><a href="class_g_f2_1_1_problem_setup.html#a1435ec920286d0a310d673dfc1b72205a4f16439ae31908d2d8582b604a8d9517">GF2::ProblemSetup::INSTANCE_BASED</a></div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8h_source.html#l00154">problemSetup.h:154</a></div></div>
<div class="ttc" id="class_g_f2_1_1_problem_setup_html_a8399b83e842d43dd98e996176975f3abaff652c7c6c9d059acad418d4bdc58490"><div class="ttname"><a href="class_g_f2_1_1_problem_setup.html#a8399b83e842d43dd98e996176975f3abaff652c7c6c9d059acad418d4bdc58490">GF2::ProblemSetup::POINT_WISE</a></div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8h_source.html#l00156">problemSetup.h:156</a></div></div>
<div class="ttc" id="class_g_f2_1_1_problem_setup_html_a24c0d41521dfc1e1bd3d6190be530cd8"><div class="ttname"><a href="class_g_f2_1_1_problem_setup.html#a24c0d41521dfc1e1bd3d6190be530cd8">GF2::ProblemSetup::formulate</a></div><div class="ttdeci">static int formulate(problemSetup::OptProblemT &amp;problem, _PrimitiveContainerT const &amp;prims, _PointContainerT const &amp;points, CONSTR_MODE const constr_mode, DATA_COST_MODE const data_cost_mode, _Scalar const scale, Eigen::Matrix&lt; _Scalar,-1, 1 &gt; const &amp;weights, GF2::AbstractPrimitivePrimitiveEnergyFunctor&lt; _Scalar, _PrimitiveT &gt; *const &amp;primPrimDistFunctor, int const patch_pop_limit, int const verbose=0)</div><div class="ttdoc">Step 2. Reads the output from generate and sets up the optimization problem in form of sparse matrice...</div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8hpp_source.html#l00181">problemSetup.hpp:181</a></div></div>
<div class="ttc" id="point__plane_8m_html_a93606e6aea9563f73484a536c9c5636d"><div class="ttname"><a href="point__plane_8m.html#a93606e6aea9563f73484a536c9c5636d">dist</a></div><div class="ttdeci">dist</div><div class="ttdef"><b>Definition:</b> <a href="point__plane_8m_source.html#l00003">point_plane.m:3</a></div></div>
<div class="ttc" id="class_g_f2_1_1_problem_setup_html_a8399b83e842d43dd98e996176975f3abac91de41c47bf1649e5508a8555bf9c03"><div class="ttname"><a href="class_g_f2_1_1_problem_setup.html#a8399b83e842d43dd98e996176975f3abac91de41c47bf1649e5508a8555bf9c03">GF2::ProblemSetup::PATCH_WISE</a></div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8h_source.html#l00156">problemSetup.h:156</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_problem_setup_params_html_a663a00b70e24b4225541fc59ad331bfe"><div class="ttname"><a href="struct_g_f2_1_1_problem_setup_params.html#a663a00b70e24b4225541fc59ad331bfe">GF2::ProblemSetupParams::constr_mode</a></div><div class="ttdeci">ProblemSetup::CONSTR_MODE constr_mode</div><div class="ttdoc">Options defined in ProblemSetup::CONSTR_MODE. </div><div class="ttdef"><b>Definition:</b> <a href="parameters_8h_source.html#l00020">parameters.h:20</a></div></div>
<div class="ttc" id="namespace_g_f2_1_1problem_setup_html_a3e0aa0a6e8bb6bc9e2c0d0a676bf1141"><div class="ttname"><a href="namespace_g_f2_1_1problem_setup.html#a3e0aa0a6e8bb6bc9e2c0d0a676bf1141">GF2::problemSetup::instanceBasedDataCost</a></div><div class="ttdeci">static int instanceBasedDataCost(_OptProblemT &amp;problem, _PrimitiveContainerT const &amp;prims, _PointContainerT const &amp;points, _AssocT const &amp;lids_varids, _WeightsT const &amp;weights, _Scalar const )</div><div class="ttdoc">Nic&#39;s version, unfinished!. </div><div class="ttdef"><b>Definition:</b> <a href="problem_setup_8hpp_source.html#l00700">problemSetup.hpp:700</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_c_exp_primitive_primitive_energy_functor_html"><div class="ttname"><a href="struct_g_f2_1_1_c_exp_primitive_primitive_energy_functor.html">GF2::CExpPrimitivePrimitiveEnergyFunctor</a></div><div class="ttdef"><b>Definition:</b> <a href="energy_functors_8h_source.html#l00114">energyFunctors.h:114</a></div></div>
<div class="ttc" id="problem_setup_8h_html"><div class="ttname"><a href="problem_setup_8h.html">problemSetup.h</a></div></div>
<div class="ttc" id="lp_8m_html_ae8954d9790c81e762964bce1b5bcda08"><div class="ttname"><a href="lp_8m.html#ae8954d9790c81e762964bce1b5bcda08">prims</a></div><div class="ttdeci">prims</div><div class="ttdef"><b>Definition:</b> <a href="lp_8m_source.html#l00010">lp.m:10</a></div></div>
<div class="ttc" id="parameters_8h_html"><div class="ttname"><a href="parameters_8h.html">parameters.h</a></div></div>
<div class="ttc" id="scale__optimization_8m_html_aa3bc9f08cad6c0b386cc994140e1ce2e"><div class="ttname"><a href="scale__optimization_8m.html#aa3bc9f08cad6c0b386cc994140e1ce2e">size</a></div><div class="ttdeci">size(unique(A,'rows')) subplot(121) hist(qo</div></div>
<div class="ttc" id="function__handle_8m_html_a03d2a3685385f82943527be28e035ad9"><div class="ttname"><a href="function__handle_8m.html#a03d2a3685385f82943527be28e035ad9">path</a></div><div class="ttdeci">function it is only possible to succesfully evaluate the resulting handle when the function the handle refers to was on the MATLAB search at the time the handle was created To create valid handles to arbitrarty functions possibly not on the search path</div><div class="ttdef"><b>Definition:</b> <a href="function__handle_8m_source.html#l00001">function_handle.m:1</a></div></div>
<div class="ttc" id="struct_g_f2_1_1_my_point_primitive_distance_functor_html"><div class="ttname"><a href="struct_g_f2_1_1_my_point_primitive_distance_functor.html">GF2::MyPointPrimitiveDistanceFunctor</a></div><div class="ttdoc">Functor with eval function; Takes a point and a primitive, and returns their distance. </div><div class="ttdef"><b>Definition:</b> <a href="energy_functors_8h_source.html#l00011">energyFunctors.h:11</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 2 2014 15:55:37 for globOpt by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
