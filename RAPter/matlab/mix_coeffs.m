close all;
clear all;
clc;

if ( 0 )
    Ab = zeros(0,7);
    
    z     = -1;
    d2    = 3;
    ang   = 2;
    large = 10;
    
    Ab(end+1,:) = [ 1, 0, 0,  1, 0, 0,   z     ]; % a1 * b1 == 0
    Ab(end+1,:) = [ 0, 1, 0,  1, 0, 0,   d2    ]; % a2 * b1 == d2
    Ab(end+1,:) = [ 1, 0, 0,  0, 1, 0,   1/d2  ]; % a1 * b2 == 1/d2
    Ab(end+1,:) = [ 0, 1, 0,  0, 1, 0,   z     ]; % a2 * b2 == 0
    Ab(end+1,:) = [ 0, 0, 1,  0, 1, 0,   ang   ]; % a3 * b2 == ang
    Ab(end+1,:) = [ 1, 0, 0,  0, 0, 1,   1/d2  ]; % a1 * b3 == 1/d2
    Ab(end+1,:) = [ 0, 1, 0,  0, 0, 1,   large ]; % a2 * b3 == Inf
    Ab(end+1,:) = [ 0, 0, 1,  0, 0, 1,   z     ]; % a3 * b3 == 0
    %Ab(end+1,:) = [ 1, 0, 0,  0, 0, 0,   z     ]; % a1 * b6 == 0
    %Ab(end+1,:) = [ 0, 1, 0,  0, 0, 0, 1,  z     ]; % a3 * b6 == 0
    %Ab(end+1,:) = [ 0, 0, 1,  0, 0, 0, 1,  z     ]; % a3 * b6 == 0
    % Ab(end+1,:) = [ 1, 0, 0,  0, 0, 0, 1, 0, 0,  z     ]; % a1 * b4 == 0
    % Ab(end+1,:) = [ 0, 1, 0,  0, 0, 0, 1, 0, 0,  d2    ]; % a2 * b4 == d2
    % Ab(end+1,:) = [ 1, 0, 0,  0, 0, 0, 0, 1, 0,  1/d2  ]; % a1 * b5 == 1/d2
    % Ab(end+1,:) = [ 0, 1, 0,  0, 0, 0, 0, 1, 0,  large ]; % a2 * b5 == Inf
    % Ab(end+1,:) = [ 0, 0, 1,  0, 0, 0, 0, 1, 0,  z     ]; % a3 * b5 == 0
    
    x = Ab(:,1:6) \ Ab(:,7)
    [ Ab(:,1:6) * x, Ab(:,7) ]
    sqrt((Ab(:,1:6) * x - Ab(:,7)).^2)
    return
end

if (0)
    Ab(end+1,:) = [ 1, 0, 0,  1, 0, 0, 0, 0, 0,  z     ]; % a1 * b1 == 0
    Ab(end+1,:) = [ 0, 1, 0,  1, 0, 0, 0, 0, 0,  d2    ]; % a2 * b1 == d2
    Ab(end+1,:) = [ 1, 0, 0,  0, 1, 0, 0, 0, 0,  1/d2  ]; % a1 * b2 == 1/d2
    Ab(end+1,:) = [ 0, 1, 0,  0, 1, 0, 0, 0, 0,  z     ]; % a2 * b2 == 0
    Ab(end+1,:) = [ 0, 0, 1,  0, 1, 0, 0, 0, 0,  ang   ]; % a3 * b2 == ang
    Ab(end+1,:) = [ 1, 0, 0,  0, 0, 1, 0, 0, 0,  1/d2  ]; % a1 * b3 == 1/d2
    Ab(end+1,:) = [ 0, 1, 0,  0, 0, 1, 0, 0, 0,  large ]; % a2 * b3 == Inf
    Ab(end+1,:) = [ 0, 0, 1,  0, 0, 1, 0, 0, 0,  z     ]; % a3 * b3 == 0
    Ab(end+1,:) = [ 1, 0, 0,  0, 0, 0, 1, 0, 0,  z     ]; % a1 * b4 == 0
    Ab(end+1,:) = [ 0, 1, 0,  0, 0, 0, 1, 0, 0,  d2    ]; % a2 * b4 == d2
    Ab(end+1,:) = [ 1, 0, 0,  0, 0, 0, 0, 1, 0,  1/d2  ]; % a1 * b5 == 1/d2
    Ab(end+1,:) = [ 0, 1, 0,  0, 0, 0, 0, 1, 0,  large ]; % a2 * b5 == Inf
    Ab(end+1,:) = [ 0, 0, 1,  0, 0, 0, 0, 1, 0,  z     ]; % a3 * b5 == 0
    Ab(end+1,:) = [ 1, 0, 0,  0, 0, 0, 0, 0, 1,  z     ]; % a1 * b6 == 0
    Ab(end+1,:) = [ 0, 0, 1,  0, 0, 0, 0, 0, 1,  z     ]; % a3 * b6 == 0
    
    x = Ab(:,1:9) \ Ab(:,10)
    (Ab(:,1:9) * x - Ab(:,10)).^2
    
    return
end

if ( 0 )
    syms a1 a2 a3 b1 b2 b3 b4 b5 b6 d2 ang
    solve( a2 * b1 == d2, ...
        a1 * b1 <= 0, ...
        a1 * b2 == 1/d2, ...
        a2 * b2 <= 0, ...
        a1, a2, b1, b2 )
end

syms a1 a2 a3 b1 b2 b3 c d2 ang
solve(  a1 * b1 <= 0, ...
        a2 * b1 == d2, ...
        a1 * b2 == c, ...
        a2 * b2 <= 0, ...
        a3 * b2 == ang, ...
        a1 * b3 == c, ...
        a1, a2, a3, b1, b2, b3 )
        %a2 * b3 == 10000, ...        
        %a3 * b3 == 0, ...